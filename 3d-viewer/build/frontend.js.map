{"version":3,"file":"frontend.js","mappings":"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","sources":["webpack:///external window \"ReactDOM\"","webpack:///../../../../../../../Development/plugin-modules/node_modules/react-dom/client.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/global","webpack:///webpack/runtime/publicPath","webpack:///external window \"React\"","webpack:///../wp-utils/v1/hexToRGB.js","webpack:///./src/utils/ModelReader.js","webpack:///./src/utils.js","webpack:///./src/utils/getClickAbleDom.js","webpack:///./src/blocks/3d-viewer/Components/Common/Style.js","webpack:///./src/components/Icons/fullscreenOpen.js","webpack:///./src/components/Icons/Close.js","webpack:///./src/utils/createSelector.js","webpack:///./src/blocks/3d-viewer/Components/Common/SliderControllder.js","webpack:///./src/blocks/3d-viewer/Components/Common/ModelPagination.js","webpack:///./src/blocks/3d-viewer/Components/Common/Basic3DViewer.js","webpack:///./src/blocks/3d-viewer/Components/Common/Viewer.js","webpack:///./src/utils/modelRenderer.js","webpack:///./src/utils/woocommerce.js","webpack:///./src/public/Components/FrontEnd.js","webpack:///./src/utils/renderModel.js","webpack:///./src/public/product.js","webpack:///./src/public/frontend.js","webpack:///../wp-utils/v1/jsonParse.js"],"sourcesContent":["module.exports = window[\"ReactDOM\"];","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","function hexToRGB(hex, type = \"string\") {\r\n  if (!hex) return;\r\n  if (hex === \"transparent\") {\r\n    return {\r\n      r: 255,\r\n      g: 255,\r\n      b: 255,\r\n      a: 0,\r\n    };\r\n  }\r\n\r\n  if (hex.includes(\"rgba\")) {\r\n    const match = hex.match(/rgba?\\((\\d+),(\\d+),(\\d+)(?:,([\\d.]+))?\\)/);\r\n    if (match) {\r\n      const [, r, g, b, a = 1] = match.map(Number);\r\n      return { r, g, b, a };\r\n    }\r\n    return null; // Return null for invalid input\r\n  }\r\n\r\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?$/i.exec(hex.replace(\"#\", \"\"));\r\n  return result\r\n    ? {\r\n        r: parseInt(result[1], 16),\r\n        g: parseInt(result[2], 16),\r\n        b: parseInt(result[3], 16),\r\n        a: parseInt(result[4], 16) ? parseInt(result[4], 16) : parseInt(result[4], 16) === 0 ? 0 : 255,\r\n      }\r\n    : null;\r\n}\r\n\r\nexport default hexToRGB;\r\n","import { rgbaStringToFactor } from \"./../utils\";\n\nclass ModelReader {\n  constructor(model) {\n    window.model = model;\n    this.model = model;\n    this.copy = null;\n    this.thumbnailsById = new Map();\n    this.thumbnail_size = 256;\n    this.textures = [];\n    this.texturesArray = [];\n    this.textureChannels = [];\n    this.defaultMaterialData = null;\n    // this.init();\n    this.initialized = false;\n    this.sizes = [];\n    this.copy = null;\n    this.readyCallbacks = [];\n    this.isReady = false;\n\n    if (this.model.loaded) {\n      this.onLoad();\n    } else {\n      this.model.addEventListener(\"load\", this.onLoad.bind(this));\n    }\n  }\n  initialize() {\n    this.isReady = true;\n    this.readyCallbacks.forEach((callback) => callback());\n    this.readyCallbacks = [];\n  }\n\n  onReady(callback) {\n    if (this.isReady) {\n      callback();\n    } else {\n      this.readyCallbacks.push(callback);\n    }\n  }\n\n  async onLoad() {\n    this.modelUrl = this.model.src;\n    this.getDefaultMaterialData();\n\n    this.thumbnailsById = await this.createThumbnails();\n\n    if (window.pagenow) {\n      const loaded = await this.loadModelWithoutAppending(this.model.src + \"?\" + Date.now());\n      this.copy = loaded.model;\n      const thumbnailsById = await this.createThumbnails(new Map(), this.copy.materials);\n      this.copy.thumbnailsById = thumbnailsById;\n    }\n    this.initialize();\n  }\n\n  getTextureId(gltfImage) {\n    return gltfImage.uri ?? gltfImage.bufferView.toString();\n  }\n\n  /**\n   * Retrieves stored textures, generating them if not already available.\n   * @returns {Promise<Object>} - The texture data.\n   */\n  async getTextures() {\n    if (Object.keys(this.textures).length === 0 && this.model) {\n      await this.createThumbnails();\n    }\n    return this.textures;\n  }\n  async getBlobFileSize(blobUrl) {\n    try {\n      const response = await fetch(blobUrl);\n      if (!response.ok) throw new Error(\"Failed to fetch the Blob URL\");\n\n      const blob = await response.blob();\n      return blob.size; // Size in bytes\n    } catch (error) {\n      console.error(\"Error getting Blob file size:\", error);\n      return null;\n    }\n  }\n\n  /**\n   * Stores texture thumbnails in the cache.\n   * @param {Map} thumbnailsById - The texture cache map.\n   * @param {Object} textureInfo - The texture information.\n   * @returns {Promise<string|null>} - The texture ID.\n   */\n  async pushThumbnail(thumbnailsById, textureInfo) {\n    const { texture } = textureInfo || {};\n    if (!texture || !texture.source) return null;\n\n    const id = this.getTextureId(texture.source);\n    if (!thumbnailsById.has(id)) {\n      const objectUrl = await texture.source.createThumbnail(this.thumbnail_size, this.thumbnail_size);\n      const size = await this.getBlobFileSize(objectUrl);\n      thumbnailsById.set(id, { objectUrl, texture, size, id });\n      if (!this.textures[id]) {\n        this.texturesArray.push(id);\n        this.textures[id] = objectUrl;\n        this.sizes[id + \"_\" + size] = objectUrl;\n      }\n    }\n    return id;\n  }\n\n  async createThumbnails(thumbnailsById, materials = this.model.model?.materials) {\n    if (!thumbnailsById) {\n      thumbnailsById = new Map();\n    }\n    for (const material of materials || []) {\n      await material.ensureLoaded();\n      const { pbrMetallicRoughness, normalTexture, emissiveTexture, occlusionTexture } = material;\n      const { baseColorTexture, metallicRoughnessTexture } = pbrMetallicRoughness;\n      await this.pushThumbnail(thumbnailsById, normalTexture);\n      await this.pushThumbnail(thumbnailsById, emissiveTexture);\n      await this.pushThumbnail(thumbnailsById, occlusionTexture);\n      await this.pushThumbnail(thumbnailsById, baseColorTexture);\n      await this.pushThumbnail(thumbnailsById, metallicRoughnessTexture);\n    }\n    // this.thumbnailsById = thumbnailsById;\n    return thumbnailsById;\n  }\n  getAllMaterialData() {\n    if (!this.model.model) {\n      console.warn(\"Model not loaded yet.\");\n      return {};\n    }\n\n    const materialsData = {};\n\n    this.model.model.materials.forEach(async (material) => {\n      await material.ensureLoaded();\n\n      const materialName = material.name || `Material_${Math.random().toString(36).substr(2, 5)}`; // Ensure a unique key if no name exists\n\n      materialsData[materialName] = {\n        baseColor: {\n          texture: {\n            name: material.pbrMetallicRoughness.baseColorTexture?.texture?.source.name || null,\n            uri: material.pbrMetallicRoughness.baseColorTexture?.texture?.source.uri || null,\n          },\n          factor: material.pbrMetallicRoughness.baseColorFactor || [1, 1, 1, 1], // Default to white\n        },\n        metallicRoughness: {\n          texture: {\n            name: material.pbrMetallicRoughness.metallicRoughnessTexture?.texture?.source.name || null,\n            uri: material.pbrMetallicRoughness.metallicRoughnessTexture?.texture?.source.uri || null,\n          },\n          factor: [material.pbrMetallicRoughness.metallicFactor || 1, material.pbrMetallicRoughness.roughnessFactor || 1],\n        },\n        normal: {\n          texture: {\n            uri: material.normalTexture?.texture?.source.uri || null,\n            name: material.normalTexture?.texture?.source.name || null,\n          },\n        },\n        emissive: {\n          texture: {\n            name: material.emissiveTexture?.texture?.source.name || null,\n            uri: material.emissiveTexture?.texture?.source.uri || null,\n          },\n          factor: material.emissiveFactor || [0, 0, 0], // Default to black\n        },\n        occlusion: {\n          texture: {\n            name: material.occlusionTexture?.texture?.source.name || null,\n            uri: material.occlusionTexture?.texture?.source.uri || null,\n          },\n        },\n      };\n    });\n\n    return materialsData;\n  }\n\n  getDefaultMaterialData() {\n    if (!this.defaultMaterialData) {\n      this.defaultMaterialData = this.getAllMaterialData();\n    }\n    return this.defaultMaterialData;\n  }\n\n  /**\n   * Updates the texture and factor of a material for a specific channel.\n   *\n   * @param {THREE.Material} material - The material to update.\n   * @param {string} channel - The channel to update (e.g., 'baseColor', 'metallicRoughness', 'normal', 'emissive', 'occlusion').\n   * @param {string|null} textureUri - The URI of the new texture. If null, removes the current texture.\n   * @param {string} factor - The new factor for the color channels.\n   * @param {string} textureName - The name of the new texture.\n   *\n   * @returns {void}\n   */\n  async updateMaterialTextureAndFactor(material, channel, factor, textureUri = null, textureName = `texture_${Date.now()}`) {\n    if (!this.model?.model || !material) {\n      console.warn(\"Model or Material not found.\");\n      return;\n    }\n\n    if (factor) {\n      if (channel === \"baseColor\") material.pbrMetallicRoughness.setBaseColorFactor(rgbaStringToFactor(factor));\n      if (channel === \"metallicRoughness\") {\n        material.pbrMetallicRoughness.setMetallicFactor(factor[0]);\n        material.pbrMetallicRoughness.setRoughnessFactor(factor[1]);\n      }\n      if (channel === \"emissive\") material.setEmissiveFactor(rgbaStringToFactor(factor));\n    }\n\n    if (textureUri === \"default\") {\n      if (channel.includes(\"base\") || channel.includes(\"metallic\")) {\n        const texture = this.copy.getMaterialByName(material.name).pbrMetallicRoughness[channel + \"Texture\"].texture;\n        material.pbrMetallicRoughness[channel + \"Texture\"].setTexture(texture);\n      } else {\n        const texture = this.copy.getMaterialByName(material.name)[channel + \"Texture\"].texture;\n        material[channel + \"Texture\"].setTexture(texture);\n      }\n      console.log(`Removed texture from '${channel}' of material '${material.name}'.`);\n      return;\n    }\n\n    // Handle removing texture if textureUri is null\n    if (!textureUri) {\n      if (channel.includes(\"base\") || channel.includes(\"metallic\")) {\n        material.pbrMetallicRoughness[channel + \"Texture\"].setTexture(null);\n      } else {\n        material[channel + \"Texture\"].setTexture(null);\n      }\n      console.log(`Removed texture from '${channel}' of material '${material.name}'.`);\n      return;\n    }\n\n    // Create and apply new texture\n    try {\n      if (typeof textureUri === \"string\") {\n        textureUri = await this.model.createTexture(textureUri);\n        textureUri.name = textureName;\n      }\n      // const texture = await this.model.createTexture(textureUri);\n      // texture.name = textureName; // Unique name\n\n      if (channel.includes(\"base\") || channel.includes(\"metallic\")) {\n        material.pbrMetallicRoughness[channel + \"Texture\"].setTexture(textureUri);\n      } else {\n        material[channel + \"Texture\"].setTexture(textureUri);\n      }\n\n      console.log(`Applied new texture ${textureName} to '${channel}' of material '${material.name}'.`);\n    } catch (error) {\n      console.error(\"Error creating texture:\", error);\n    }\n  }\n\n  /**\n   * Applies textures and factors to materials based on the provided applied textures object.\n   * If a material name and channel are provided, applies the texture and factor to a specific material and channel.\n   * If only applied textures are provided, applies the textures and factors to all materials and channels.\n   *\n   * @param {Object} appliedTextures - An object containing the textures and factors to apply.\n   * @param {string} [materialName=null] - The name of the material to apply the texture and factor to.\n   * @param {string} [channel=null] - The channel (e.g., 'baseColor', 'metallicRoughness', 'normal', 'emissive', 'occlusion') to apply the texture and factor to.\n   *\n   * @returns {void}\n   */\n  async applyTexture(appliedTextures, materialName = null, channel = null) {\n    window.modelReader = this;\n    if (!appliedTextures) return;\n\n    if (materialName && channel) {\n      const { name, url } = appliedTextures[materialName]?.[channel]?.texture || {};\n      const material = this.model?.model?.getMaterialByName(materialName);\n      let textureImage = url || this.getTextureByName(name);\n      // let textureImage = appliedTextures[materialName]?.[channel]?.texture?.url;\n      if (!appliedTextures[materialName]?.[channel]?.texture) {\n        textureImage = \"default\";\n      }\n      const factor = appliedTextures[materialName]?.[channel]?.factor || null;\n      this.updateMaterialTextureAndFactor(material, channel, factor, textureImage, name);\n      return;\n    }\n\n    Object.entries(appliedTextures).forEach(([matName, channels]) => {\n      const material = this.model?.model?.getMaterialByName(matName);\n      if (!material) {\n        console.warn(`Material '${matName}' not found.`);\n        return;\n      }\n\n      Object.keys(channels).forEach((ch) => {\n        const { name, url } = channels[ch]?.texture || {};\n        let textureImage = url || this.getTextureByName(name); //|| textures[this.texturesArray[index]] || textures[name];\n        if (!channels[ch]?.texture) {\n          textureImage = \"default\";\n        }\n        const factor = channels[ch]?.factor || null;\n\n        this.updateMaterialTextureAndFactor(material, ch, factor, textureImage, name);\n      });\n    });\n  }\n\n  async shakeMaterialFactor(material, duration = 500) {\n    if (!material) return;\n    if (typeof material === \"string\") {\n      material = this.getMaterialByName(material);\n    }\n    const originalFactor = material.pbrMetallicRoughness.baseColorFactor.slice();\n    material.pbrMetallicRoughness.setBaseColorFactor([1, 0, 0, 1]);\n    setTimeout(() => {\n      material.pbrMetallicRoughness.setBaseColorFactor(originalFactor);\n    }, duration);\n  }\n\n  /**\n   * Retrieves the URI of a texture by name.\n   */\n  getTextureURIByName(name) {\n    return name.includes(\"blob\") ? name : this.textures[name] || null;\n  }\n\n  getMaterialByName(name) {\n    return this.model.model.getMaterialByName(name);\n  }\n\n  getTexturesArray() {\n    return this.texturesArray;\n  }\n\n  getTextureChannels() {\n    return [\n      {\n        label: \"Base Color\",\n        value: \"baseColor\",\n      },\n      {\n        label: \"Metallic Roughness\",\n        value: \"metallicRoughness\",\n      },\n      {\n        label: \"Normal Map\",\n        value: \"normal\",\n      },\n      {\n        label: \"Emissive\",\n        value: \"emissive\",\n      },\n      {\n        label: \"Occlusion\",\n        value: \"occlusion\",\n      },\n    ];\n  }\n\n  getMaterialsNameForSelectControl() {\n    if (!this.model.loaded) {\n      console.warn(\"Model not loaded yet\");\n      return [];\n    }\n    if (Array.isArray(this.model.model.materials)) {\n      return this.model.model.materials.map((item) => {\n        const label = item.name.replace(\"_mtl\", \"\").replaceAll(\"_\", \" \");\n        return { label, value: item.name };\n      });\n    }\n    return [];\n  }\n  getFirstMaterialName() {\n    if (!this.model.loaded || !this.model.model) {\n      console.warn(\"Model not loaded yet\");\n      return null;\n    }\n    if (Array.isArray(this.model.model.materials)) {\n      return this.model.model.materials[0].name;\n    }\n    return null;\n  }\n\n  getTextureById(textureId) {\n    return this.thumbnailsById.get(textureId);\n  }\n\n  async downloadTexture(textureId, size = 512) {\n    const { texture = null } = this.getTextureById(textureId);\n    if (!texture) {\n      console.error(\"Texture not found!\");\n      return;\n    }\n    const objectUrl = await texture.source.createThumbnail(size, size);\n\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = size;\n    canvas.height = size;\n    const ctx = canvas.getContext(\"2d\");\n\n    const image = new Image();\n    image.crossOrigin = \"anonymous\";\n    image.src = objectUrl;\n\n    image.onload = () => {\n      ctx.drawImage(image, 0, 0, size, size);\n      const link = document.createElement(\"a\");\n      link.href = canvas.toDataURL(\"image/png\");\n      link.download = `texture_${textureId}.png`;\n      link.click();\n    };\n\n    image.onerror = () => {\n      console.error(\"Failed to load texture image.\");\n    };\n  }\n\n  // async createAndApplyTexture (material, channel, value, name = \"raju\" + new Date().getTime()) {\n  //   const texture = await this.model.createTexture(value);\n  //   texture.name = name;\n  //   if (channel.includes(\"base\") || channel.includes(\"metallic\")) {\n  //     material.pbrMetallicRoughness[channel+'Texture'].setTexture(texture);\n  //   } else {\n  //     material[channel+'Texture'].setTexture(texture);\n  //   }\n  // }\n\n  deepCloneModel() {\n    const clonedModel = this.model.originalModel.clone(true); // Clones recursively\n\n    clonedModel.traverse((node) => {\n      if (node.isMesh) {\n        // Clone material (to avoid sharing)\n        if (node.material) {\n          node.material = node.material.clone();\n        }\n\n        // Clone geometry (if needed)\n        if (node.geometry) {\n          node.geometry = node.geometry.clone();\n        }\n\n        // Clone textures (to avoid sharing)\n        if (node.material.map) {\n          node.material.map = node.material.map.clone();\n          node.material.map.needsUpdate = true;\n        }\n      }\n    });\n\n    return clonedModel;\n  }\n\n  async loadModelWithoutAppending(src) {\n    return new Promise((resolve, reject) => {\n      const modelViewer = document.createElement(\"model-viewer\");\n      modelViewer.src = src;\n      modelViewer.setAttribute(\"loading\", \"eager\");\n      modelViewer.style.display = \"none\"; // Hide it from view\n      modelViewer.style.height = \"0\"; // Hide it from view\n      document.body.appendChild(modelViewer); // Append to DOM (but hidden)\n\n      modelViewer.addEventListener(\"load\", () => {\n        resolve(modelViewer);\n        // Remove it after loading if you don't need it anymore\n        // modelViewer.remove();\n      });\n\n      modelViewer.addEventListener(\"error\", (e) => {\n        reject(new Error(`Model failed to load: ${e.message}`));\n      });\n    });\n  }\n  /**\n   * Retrieves the texture object, its name, and URI by material name and channel.\n   *\n   * @param {string} materialName - The name of the material.\n   * @param {string} channel - The channel (e.g., 'baseColor', 'metallicRoughness', 'normal', 'emissive', 'occlusion').\n   *\n   * @returns {Object|null} - An object containing the texture object, its name, and URI.\n   *   If the material or texture is not found, returns null.\n   */\n  getTextureByName(textureName) {\n    // if (!this.copy) {\n    //     console.warn(\"Model copy is not generated.\");\n    //     return null;\n    // }\n\n    if (!textureName) return null;\n\n    try {\n      if (this.copy?.thumbnailsById) {\n        return this.copy.thumbnailsById.get(textureName).texture;\n      }\n      if (this.thumbnailsById) {\n        return this.thumbnailsById.get(textureName)?.texture;\n      }\n    } catch (error) {\n      console.error(error.message, textureName);\n    }\n    return null;\n  }\n\n  createCopy() {\n    // const\n  }\n}\n\nexport default ModelReader;\n","import { textureChannels } from './blocks/3d-viewer/data';\nimport ModelReader from './utils/ModelReader';\nimport { produce } from \"immer\";\n\nexport function getParams(url = \"\") {\n  url = url || location?.href;\n  var queryStart = url.indexOf(\"?\") + 1,\n    queryEnd = url.indexOf(\"#\") + 1 || url.length + 1,\n    query = url.slice(queryStart, queryEnd - 1),\n    pairs = query.replace(/\\+/g, \" \").split(\"&\"),\n    parms = {},\n    i,\n    n,\n    v,\n    nv;\n\n  if (query === url || query === \"\") return;\n\n  for (i = 0; i < pairs.length; i++) {\n    nv = pairs[i].split(\"=\", 2);\n    n = decodeURIComponent(nv[0]);\n    v = decodeURIComponent(nv[1]);\n\n    // eslint-disable-next-line no-prototype-builtins\n    if (!parms.hasOwnProperty(n)) parms[n] = [];\n    parms[n] = nv.length === 2 ? v : null;\n  }\n  return parms;\n}\n\nexport function restoreOriginalImageSrc(imageSrc) {\n  // Define a regular expression pattern to match sizes like \"-100x100\", \"-200x200\", etc.\n  const sizePattern = /-\\d{2,4}x\\d{2,4}/g;\n\n  // Remove any size string from the image src and the hyphen before it\n  const originalSrc = imageSrc.replace(sizePattern, \"\");\n\n  return originalSrc;\n}\n\nexport function isImageSource(str) {\n  // Regular expression to match common image file extensions\n  const imageExtensions = /\\.(jpg|jpeg|png|gif|bmp|svg|webp)$/i;\n\n  // Check if the string matches the image extension pattern\n  return imageExtensions.test(str);\n}\n\nexport function findParentUntilMultipleChildren(element) {\n  let parent = element.parentElement;\n\n  while (parent && parent.children.length === 1) {\n    element = parent;\n    parent = parent.parentElement;\n  }\n\n  return element;\n}\n\nexport function findParentAnchorTag(element) {\n  let parent = element.parentElement;\n\n  while (parent && parent.tagName === \"A\") {\n    element = parent;\n    parent = parent.parentElement;\n  }\n\n  return element;\n}\n\nexport function getMaterials(materials) {\n  if (Array.isArray(materials)) {\n    return materials.map((item) => item.name);\n  }\n  return [];\n}\n\nexport function getMaterialsNameForSelectControl(materials = []) {\n  if (Array.isArray(materials)) {\n    return materials.map((item) => {\n      const label = item.name.replace(\"_mtl\", \"\").replaceAll(\"_\", \" \");\n      return { label, value: item.name };\n    });\n  }\n  return [];\n}\n\nexport function rgbaToFactor(r, g, b, a = 255) {\n  return [r / 255, g / 255, b / 255, a / 255];\n}\n\nexport function sRGBToLinear(value) {\n  value /= 255;\n  return value <= 0.04045 ? value / 12.92 : ((value + 0.055) / 1.055) ** 2.4;\n}\n\nexport function rgbaStringToFactor(rgbaString) {\n  if (!['rgba', 'rgb'].includes(isRGBorRGBA(rgbaString))) {\n    return rgbaString;\n  }\n  const match = rgbaString.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*([\\d.]+)\\)/);\n  if (!match) return null;\n\n  const [_, r, g, b, a] = match.map(Number);\n  return [sRGBToLinear(r), sRGBToLinear(g), sRGBToLinear(b), a]; // Convert RGB, keep alpha\n}\n\nexport function factorToRgbaString(factor) {\n  if (!Array.isArray(factor) || (factor.length !== 3 && factor.length !== 4)) {\n    return factor;\n  }\n\n  const r = Math.round(factor[0] * 255);\n  const g = Math.round(factor[1] * 255);\n  const b = Math.round(factor[2] * 255);\n  const a = factor.length === 4 ? factor[3] : 1; // Default alpha to 1 if not present\n\n  return factor.length === 4 ? `rgba(${r}, ${g}, ${b}, ${a})` : `rgb(${r}, ${g}, ${b})`;\n}\n\nexport function rgbaToHex(rgba) {\n  // Extract the RGBA values from the string\n  try {\n    const rgbaValues = rgba.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+),?\\s*([0-9.]+)?\\)/);\n\n    if (!rgbaValues) {\n      throw new Error(\"Invalid RGBA color string\");\n    }\n\n    // Parse the R, G, B values\n    const r = parseInt(rgbaValues[1]);\n    const g = parseInt(rgbaValues[2]);\n    const b = parseInt(rgbaValues[3]);\n\n    // Parse the alpha value, default to 1 if not provided\n    const a = rgbaValues[4] !== undefined ? parseFloat(rgbaValues[4]) : 1;\n\n    // Convert to hex\n    const toHex = (n) => n.toString(16).padStart(2, \"0\").toUpperCase();\n\n    // Convert alpha to hex (if needed)\n    const alphaHex = toHex(Math.round(a * 255));\n\n    // Return hex with or without alpha\n    return `#${toHex(r)}${toHex(g)}${toHex(b)}${a < 1 ? alphaHex : \"\"}`;\n  } catch (error) {\n    return null;\n  }\n}\n\nexport function getAllMaterialData(model) {\n  if (!model.model) {\n    console.warn(\"Model not loaded yet.\");\n    return {};\n  }\n\n  const materialsData = {};\n\n  model.model.materials.forEach((material) => {\n    const materialName = material.name || `Material_${Math.random().toString(36).substr(2, 5)}`; // Ensure a unique key if no name exists\n\n    materialsData[materialName] = {\n      baseColor: {\n        texture: material.pbrMetallicRoughness.baseColorTexture?.texture?.source?.uri || null,\n        factor: material.pbrMetallicRoughness.baseColorFactor || [1, 1, 1, 1], // Default to white\n        default: {\n          texture: material.pbrMetallicRoughness.baseColorTexture?.texture?.source?.uri || null,\n          factor: material.pbrMetallicRoughness.baseColorFactor || [1, 1, 1, 1], // Default to white\n        }\n      },\n      metallicRoughness: {\n        texture: material.pbrMetallicRoughness.metallicRoughnessTexture?.texture?.source?.uri || null,\n        uri: material.pbrMetallicRoughness.metallicRoughnessTexture?.texture?.source?.uri || null,\n        textureName: material.pbrMetallicRoughness.metallicRoughnessTexture?.texture?.source?.textureName || null,\n        factor: [\n          material.pbrMetallicRoughness.metallicFactor || 1,\n          material.pbrMetallicRoughness.roughnessFactor || 1\n        ],\n        default: {\n          uri: material.pbrMetallicRoughness.metallicRoughnessTexture?.texture?.source?.uri || null,\n          textureName: material.pbrMetallicRoughness.metallicRoughnessTexture?.texture?.source?.textureName || null,\n          factor: [\n            material.pbrMetallicRoughness.metallicFactor || 1,\n            material.pbrMetallicRoughness.roughnessFactor || 1\n          ],\n        }\n      },\n      normal: {\n        texture: material.normalTexture?.texture?.source?.uri || null,\n        default: {\n          texture: material.normalTexture?.texture?.source?.uri || null,\n        }\n      },\n      emissive: {\n        texture: material.emissiveTexture?.texture?.source?.uri || null,\n        factor: material.emissiveFactor || [0, 0, 0], // Default to black\n        default: {\n          texture: material.emissiveTexture?.texture?.source?.uri || null,\n          factor: material.emissiveFactor || [0, 0, 0], // Default to black\n        }\n      },\n      occlusion: {\n        texture: material.occlusionTexture?.texture?.source?.uri || null,\n        default: {\n          texture: material.occlusionTexture?.texture?.source?.uri || null,\n        }\n      },\n    };\n  });\n  return materialsData;\n}\n\n\nexport function isRGBorRGBA(color) {\n  const rgbRegex = /^rgb\\(\\s*\\d{1,3}\\s*,\\s*\\d{1,3}\\s*,\\s*\\d{1,3}\\s*\\)$/i;\n  const rgbaRegex = /^rgba\\(\\s*\\d{1,3}\\s*,\\s*\\d{1,3}\\s*,\\s*\\d{1,3}\\s*,\\s*(0|1|0?\\.\\d+)\\s*\\)$/i;\n\n  if (rgbaRegex.test(color)) return \"rgba\";\n  if (rgbRegex.test(color)) return \"rgb\";\n  return false; // Not a valid RGB/RGBA string\n}\n\nexport const createAndApplyTexture = async (model, material, channel, value, name = \"raju\" + new Date().getTime()) => {\n  const texture = await model.createTexture(value);\n  texture.name = name;\n  if (channel.includes(\"base\") || channel.includes(\"metallic\")) {\n    material.pbrMetallicRoughness[channel + 'Texture'].setTexture(texture);\n  } else {\n    material[channel + 'Texture'].setTexture(texture);\n  }\n};\n\n\nexport const applyTexture = async (model, appliedTextures) => {\n  const modelReader = new ModelReader(model);\n  window.modelReader = modelReader;\n  const textures = await modelReader.getTextures();\n  const texturesArray = modelReader.getTexturesArray();\n\n\n  Object.keys(appliedTextures).map(materialName => {\n    const material = model?.model?.getMaterialByName(materialName);\n\n    if (!material) {\n      return;\n    }\n\n    textureChannels.map(item => {\n      const channel = item?.value || null;\n\n      if (!channel) {\n        return;\n      }\n\n      const { name, index } = appliedTextures[materialName]?.[channel]?.texture || {};\n      const textureImage = textures[texturesArray[index]] || textures[name];\n      const factor = appliedTextures[materialName]?.[channel]?.factor || null;\n      if (textureImage) {\n\n        createAndApplyTexture(model, material, channel, textureImage, name);\n      }\n\n      if (factor) {\n        if (channel === 'baseColor') {\n          material.pbrMetallicRoughness.setBaseColorFactor(rgbaStringToFactor(factor));\n        }\n        if (channel === 'emissive') {\n          material.setEmissiveFactor(rgbaStringToFactor(factor));\n        }\n      }\n\n    })\n  })\n}\n\n\n\n\nexport function resetMaterialProperty(defaultMaterialData, materialName, channel, property) {\n  if (!defaultMaterialData[materialName][channel].default) {\n    return defaultMaterialData;\n  }\n  if (!defaultMaterialData[materialName]) {\n    console.warn(`Material '${materialName}' not found in default data.`);\n    return defaultMaterialData;\n  }\n\n  if (!defaultMaterialData[materialName][channel]) {\n    console.warn(`Channel '${channel}' not found for material '${materialName}'.`);\n    return defaultMaterialData;\n  }\n\n  if (property !== \"factor\" && property !== \"texture\") {\n    console.warn(`Invalid property '${property}'. Use 'factor' or 'texture'.`);\n    return defaultMaterialData;\n  }\n\n  return produce(defaultMaterialData, (draft) => {\n    if (property === \"factor\") {\n      draft[materialName][channel].factor = draft[materialName][channel].default.factor;\n    } else if (property === \"texture\") {\n      draft[materialName][channel].texture = draft[materialName][channel].default.texture;\n    }\n  });\n}\n\n\nexport function merge(target, source) {\n  // If source is not an object, return a copy of the target as is\n  if (typeof source !== 'object' || source === null) {\n    return { ...target };\n  }\n\n  // If the target is not an object, create a new object\n  if (typeof target !== 'object' || target === null) {\n    target = Array.isArray(source) ? [] : {};\n  }\n\n  // Create a new object to store merged results\n  const result = Array.isArray(target) ? [] : {};\n\n  // Merge target and source\n  for (const key in target) {\n    if (Object.prototype.hasOwnProperty.call(target, key)) {\n      result[key] = target[key];\n    }\n  }\n\n  for (const key in source) {\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\n      if (typeof source[key] === 'object' && source[key] !== null) {\n        // Recursively merge if both source and target values are objects\n        result[key] = merge(result[key], source[key]);\n      } else {\n        // Directly assign value from the source\n        result[key] = source[key];\n      }\n    }\n  }\n\n  return result;\n}\n\n\nexport function debounce(callback, delay) {\n  let timer;\n  return function (...args) {\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      callback.apply(this, args); // Preserve the correct `this` context\n    }, delay);\n  };\n}","import { findParentUntilMultipleChildren, isImageSource, restoreOriginalImageSrc } from \"../utils\";\n\nexport default function getClickAbleDom(selector) {\n    if (!selector) return null;\n    let clickableItem = document.querySelector(isImageSource(selector) ? `img[src=\"${selector}\"]` : selector.includes(\"#\") || selector.includes(\".\") ? selector : `.${selector}`);\n    if (isImageSource(selector)) {\n        if (!clickableItem) {\n            clickableItem = document.querySelector(`img[data-src=\"${selector}\"]`);\n        }\n\n        if (!clickableItem) {\n            clickableItem = document.querySelector(`img[data-src=\"${restoreOriginalImageSrc(selector)}\"]`);\n        }\n\n        if (!clickableItem) {\n            clickableItem = document.querySelector(`img[src=\"${restoreOriginalImageSrc(selector)}\"]`);\n        }\n\n        if (!clickableItem) {\n            clickableItem = document.querySelector(`a[href=\"${restoreOriginalImageSrc(selector)}\"]`);\n        }\n    }\n\n    if (clickableItem) {\n        clickableItem = findParentUntilMultipleChildren(clickableItem);\n        if (clickableItem?.innerHTML?.includes(\"<a\")) {\n            clickableItem.classList.add(\"bp3dv_a_popup_opener\");\n        }\n\n        if (clickableItem?.innerHTML?.includes(\"<img\") && window.location.host === \"reintest.be\") {\n            clickableItem.classList.add(\"bp3dv_play_icon\");\n        }\n    }\n    return clickableItem;\n}","import { useEffect, useState } from \"react\";\n\nconst Style = ({ attributes }) => {\n    const { styles, uniqueId, woo, progressBar, additional } = attributes;\n    const { progressBarColor, thumbSize = \"90px\" } = styles;\n\n    const [CSS, setCSS] = useState(null);\n\n    useEffect(() => {\n        const CSS = `\n        #${uniqueId} {\n            width: ${`${styles?.width?.desktop || styles.width}`};\n            height: calc(${styles?.height?.desktop || styles.height});\n        }\n        .pop-up-content-wrap #${uniqueId} {\n            height: ${styles?.height?.desktop || styles.height};\n        }\n        #${uniqueId} .select {display: none}\n        \n        #${uniqueId} model-viewer {\n            background: ${styles?.bgColor} ${styles?.bgImage ? `url(${styles?.bgImage})` : \" \"} no-repeat center center;\n            background-size: cover;\n        }\n        #${uniqueId} model-viewer::part(default-progress-bar) {\n             display: ${!progressBar ? \"none\" : \"block\"}\n        }\n        #${uniqueId} .online_3d_viewer,\n        #${uniqueId} .b3dviewer-wrapper {\n            width: ${woo ? \"100%\" : `${styles?.width.desktop || styles.width}`};\n            height: ${styles?.height.desktop || styles.height};\n        }\n        @media screen and (max-width: 1024px){\n            #${uniqueId} .online_3d_viewer,\n            #${uniqueId} .b3dviewer-wrapper {\n                width: ${woo ? \"100%\" : `${styles?.width.tablet || styles.width}`};\n                height: ${styles?.height.tablet || styles.height};\n            }\n        }\n        @media screen and (max-width: 640px){\n            #${uniqueId} .online_3d_viewer,\n            #${uniqueId} .b3dviewer-wrapper {\n                width: ${woo ? \"100%\" : `${styles?.width.mobile || styles.width}`};\n                height: ${styles?.height.mobile || styles.height};\n            }\n        }\n        #${uniqueId} model-viewer::part(default-progress-bar){\n            background: ${progressBarColor};\n        }\n        #${uniqueId} .slides .slide{\n            width: ${thumbSize};\n            height: ${thumbSize};\n            padding: calc(${thumbSize} * 0.04);\n        }\n        #${uniqueId} .slide-number span{\n            font-size: calc(${thumbSize} * 0.8);\n        }\n        ${additional?.CSS}\n    `.replaceAll(/\\n?\\s\\s/g, \"\");\n        setCSS(CSS);\n    }, [uniqueId, styles, additional, progressBar]);\n\n    return <style>{CSS}</style>;\n};\n\nexport default Style;\n","const FullscreenOpen = ({ element }) => {\n\n  const handleClick = () => {\n    if (element) {\n      if(typeof element.requestFullscreen === 'function'){\n        element.requestFullscreen();\n      }else {\n\n        element.classList.add('fullscreen');\n      }\n    }\n  };\n\n  return (\n    <svg onClick={handleClick} id=\"openBtn\" width=\"24px\" height=\"24px\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"#222\" className=\"bi bi-arrows-fullscreen\">\n      <path\n        fillRule=\"even\"\n        d=\"M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707zm0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707zm-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707z\"\n      ></path>\n    </svg>\n  );\n};\n\nexport default FullscreenOpen;\n","// import { withSelect } from \"@wordpress/data\";\n\n// const Close = ({ isSidebarOpened }) => {\n//   return (\n//     <svg id=\"closeBtn\" className={isSidebarOpened ? \"sidebar-open\" : \"sidebar-closed\"} width=\"34px\" height=\"34px\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n//       <path fill=\"none\" stroke=\"#333\" strokeWidth=\"2\" d=\"M7,7 L17,17 M7,17 L17,7\"></path>\n//     </svg>\n//   );\n// };\n\n// export default withSelect((select) => {\n//   const { isEditorSidebarOpened } = select(\"core/edit-post\");\n//   return {\n//     isSidebarOpened: isEditorSidebarOpened(),\n//   };\n// })(Close);\n\nconst Close = ({element}) => {\n  function closeFullscreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.webkitExitFullscreen) {\n      // / Safari /;\n      document.webkitExitFullscreen();\n    } else if (document.msExitFullscreen) {\n      // / IE11 /;\n      document.msExitFullscreen();\n    }\n    element?.classList.remove('fullscreen');\n  }\n  return (\n    <svg id=\"closeBtn\" onClick={closeFullscreen} className=\"sidebar-open\" width=\"34px\" height=\"34px\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path fill=\"none\" stroke=\"#f2f2f2\" strokeWidth=\"2\" d=\"M7,7 L17,17 M7,17 L17,7\"></path>\n    </svg>\n  );\n};\n\nexport default Close;\n","const createSelector = (element, options = [], selected, show = true) => {\n    if (element?.parentElement) {\n        if (show) {\n            element.parentElement.style.display = \"inline-block\";\n        }\n        element.innerHTML = \"\";\n    } else {\n        return;\n    }\n    if (!options.length && element.parentElement) {\n        if (window.location.href.includes(\"wp-admin\")) {\n            options[0] = \"not available\";\n        } else {\n            element.parentElement.style.display = \"none\";\n        }\n    }\n    for (const name of options) {\n        const option = document.createElement(\"option\");\n        option.value = name;\n        option.textContent = name;\n        element.appendChild(option);\n        if (name === selected) {\n            option.selected = true;\n        }\n    }\n};\n\nexport default createSelector;","import React from \"react\";\n\nconst SliderController = ({ currentItem, setCurrentItem, models }) => {\n  return (\n    <>\n      <div className=\"slideController\">\n        <svg fill=\"#000000\" onClick={() => setCurrentItem(currentItem > 0 ? currentItem - 1 : currentItem)} className={`arrow-left ${currentItem > 0 ? \"\" : \"disabled\"}`} width=\"24px\" height=\"24px\" viewBox=\"-78.5 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\">\n          <title>left</title>\n          <path d=\"M257 64L291 98 128 262 291 426 257 460 61 262 257 64Z\" />\n        </svg>\n        <svg onClick={() => setCurrentItem(currentItem < models.length - 1 ? currentItem + 1 : currentItem)} fill=\"#000000\" className={`arrow-right ${currentItem < models.length - 1 ? \"\" : \"disabled\"}`} width=\"24px\" height=\"24px\" viewBox=\"-77 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\">\n          <title>right</title>\n          <path d=\"M98 460L64 426 227 262 64 98 98 64 294 262 98 460Z\" />\n        </svg>\n      </div>\n    </>\n  );\n};\n\nexport default SliderController;\n","import React from \"react\";\n\nconst ModelPagination = ({ attributes, currentItem, setCurrentItem, isPagination }) => {\n  const { multiple, woo, models } = attributes;\n  return (\n    <>\n      {multiple && !woo && isPagination && (\n        <div className=\"slider\">\n          <div className=\"slides\">\n            {models.map((model, index) => (\n              <button\n                key={index}\n                className={`slide ${index === currentItem ? \"selected\" : \"\"} ${model.poster ? \"\" : \"slide-number\"}`}\n                data-source={model?.modelUrl}\n                data-poster={model?.poster}\n                onClick={() => setCurrentItem(index)}\n              >\n                {model.poster ? <img src={model?.poster} /> : <span>{index + 1}</span>}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default ModelPagination;\n","import { useEffect, useRef, useState } from \"react\";\n\nimport posx from \"../../../../../public/images/envmaps/fishermans_bastion/posx.jpg\";\nimport posy from \"../../../../../public/images/envmaps/fishermans_bastion/posy.jpg\";\nimport posz from \"../../../../../public/images/envmaps/fishermans_bastion/posz.jpg\";\nimport negx from \"../../../../../public/images/envmaps/fishermans_bastion/negx.jpg\";\nimport negy from \"../../../../../public/images/envmaps/fishermans_bastion/negy.jpg\";\nimport negz from \"../../../../../public/images/envmaps/fishermans_bastion/negz.jpg\";\nimport { hexToRGB } from \"../../../../../../wp-utils/v1\";\nimport SliderController from \"./SliderControllder\";\nimport ModelPagination from \"./ModelPagination\";\nimport { rgbaStringToFactor } from \"../../../../utils\";\n\nfunction copyObjectUsingJSON(originalObject) {\n  return JSON.parse(JSON.stringify(originalObject));\n}\n\nconst Button = (props) => {\n  return <button {...props}></button>;\n};\n\nconst Basic3DViewer = (props) => {\n  const { attributes, currentItem, setCurrentItem, modelSrc, setAttributes, __ } = props;\n  const { styles, models, multiple, O3DVSettings } = attributes;\n  const { isNavigation, isPagination, camera, mouseControl, zoom = true, showEdge = false, edgeColor } = O3DVSettings;\n\n  const [viewerLoaded, setViewerLoaded] = useState(false);\n\n  const parentDiv = useRef(null);\n  const viewerRef = useRef(null);\n  const instanceRef = useRef(null);\n\n  useEffect(() => {\n    if (modelSrc) {\n      viewerRef.current?.Destroy();\n      viewerRef.current?.canvas?.remove();\n      viewerRef.current = null;\n      if (viewerRef.current === null) {\n        // OV.SetExternalLibLocation(\"../libs\");\n\n        const defaultCamera = camera && !multiple ? { camera: new OV.Camera(new OV.Coord3D(...Object.values(camera.eye)), new OV.Coord3D(...Object.values(camera.center)), new OV.Coord3D(...Object.values(camera.up)), 45.0) } : {};\n\n        instanceRef.current = new OV.EmbeddedViewer(parentDiv.current, {\n          ...defaultCamera,\n          backgroundColor: new OV.RGBAColor(255, 255, 255, 255),\n          edgeSettings: new OV.EdgeSettings(showEdge, new OV.RGBColor(0, 0, 0), 1),\n          environmentSettings: new OV.EnvironmentSettings([posx, posy, posz, negx, negy, negz], false),\n        });\n\n        const models = [modelSrc];\n        instanceRef.current.LoadModelFromUrlList(models);\n        viewerRef.current = instanceRef.current;\n        window.VR = instanceRef.current;\n\n        // handle zoom functionality\n        instanceRef.current.viewer.navigation.SetZoomStatus(zoom);\n      } else {\n        viewerRef.current.LoadModelFromUrlList([modelSrc]);\n        const Coord3D = new OV.Coord3D(0.0, 0.0, 0.0);\n        viewerRef.current.viewer.SetCamera(new OV.Camera(new OV.Coord3D(0.0, 0.0, 1.0), Coord3D, new OV.Coord3D(0.0, 1.0, 0.0), 45.0));\n      }\n    }\n\n    return () => {\n      if (viewerRef.current !== null && parentDiv.current !== null && viewerLoaded) {\n        delete viewerRef.current.model;\n        viewerRef.current.viewer.renderer.resetState();\n        viewerRef.current.viewer.Clear();\n        if (viewerRef.current.viewer) {\n          delete viewerRef.current.viewer;\n        }\n        const gl = viewerRef.current.canvas.getContext(\"webgl2\");\n        gl.getExtension(\"WEBGL_lose_context\").loseContext();\n        const tempClone = viewerRef.current.canvas.cloneNode(true);\n        viewerRef.current.canvas.parentNode.replaceChild(tempClone, viewerRef.current.canvas);\n        parentDiv.current?.removeChild(parentDiv.current.children[0]);\n        viewerRef.current.canvas?.parentNode?.removeChild(viewerRef.current.canvas);\n        viewerRef.current.canvas.remove();\n        viewerRef.current = null;\n        setViewerLoaded(false);\n      }\n    };\n  }, [modelSrc]);\n\n  useEffect(() => {\n    if (hexToRGB(styles.bgColor)) {\n      viewerRef.current?.viewer?.SetBackgroundColor(hexToRGB(styles.bgColor));\n    }\n    setTimeout(() => {\n      viewerRef.current?.viewer?.Resize(parentDiv.current.offsetWidth, parentDiv.current.offsetHeight);\n    }, 10);\n    viewerRef.current.viewer.Render();\n    window.viewer = viewerRef.current;\n  }, [styles, modelSrc]);\n\n  // resize if window is resized\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => {\n      viewerRef.current?.viewer?.Resize(parentDiv.current?.offsetWidth, parentDiv.current?.offsetHeight);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (instanceRef.current) {\n      instanceRef.current.viewer.navigation.SetZoomStatus(zoom);\n      const [r = 0, g = 0, b = 0] = rgbaStringToFactor(edgeColor) || [];\n      instanceRef.current.viewer.SetEdgeSettings(new OV.EdgeSettings(showEdge, new OV.RGBColor(r * 255, g * 255, b * 255), 0));\n    }\n  }, [zoom, showEdge, edgeColor]);\n\n  return (\n    <>\n      <div\n        ref={parentDiv}\n        role={\"img\"}\n        aria-label=\"Canvas showing the model in the 3D Viewer\"\n        className={`${mouseControl ? \"\" : \"DMC\"} ${viewerRef.current?.modelLoader?.inProgress} relative flex  flex-col items-center justify-center p-2 h-72 w-72 border-2 border-black rounded-sm online_3d_viewer`}\n      // style={{ width: styles.width.desktop || styles.width, height: styles.height.desktop || styles.height }}\n      >\n        <ModelPagination attributes={attributes} setCurrentItem={setCurrentItem} currentItem={currentItem} isPagination={isPagination} />\n        {multiple && isNavigation && models.length > 1 && <SliderController currentItem={currentItem} setCurrentItem={setCurrentItem} models={models} />}\n        {setAttributes && !multiple && (\n          <div className=\"setDefaultViewContainer\">\n            <Button\n              variant=\"primary\"\n              className=\"setDefaultView button button-primary\"\n              onClick={() => {\n                if (viewerRef.current) {\n                  const camera = copyObjectUsingJSON(viewerRef.current?.viewer?.GetCamera());\n                  setAttributes({ O3DVSettings: { ...O3DVSettings, camera } });\n                }\n              }}\n            >\n              {camera ? __(\"Reset Default View\", \"model-viewer\") : __(\"Set Default View\", \"model-viewer\")}\n            </Button>\n            {camera && (\n              <>\n                <Button\n                  variant=\"primary\"\n                  className=\"setDefaultView button button-primary\"\n                  onClick={() => {\n                    viewerRef.current?.viewer.SetCamera(new OV.Camera(new OV.Coord3D(...Object.values(camera.eye)), new OV.Coord3D(...Object.values(camera.center)), new OV.Coord3D(...Object.values(camera.up)), 45.0));\n                  }}\n                >\n                  {__(\"See Default View\", \"model-viewer\")}\n                </Button>\n                <Button variant=\"primary\" className=\"setDefaultView button button-primary\" onClick={() => setAttributes({ O3DVSettings: { ...O3DVSettings, camera: null } })}>\n                  {__(\"Remove Default View\", \"model-viewer\")}\n                </Button>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Basic3DViewer;\n","import { useEffect, useState, useRef, useCallback, useMemo } from \"react\";\n\nimport Style from \"./Style\";\nimport FullscreenOpen from \"../../../../components/Icons/fullscreenOpen\";\nimport Close from \"../../../../components/Icons/Close\";\nimport modelRenderer from \"../../../../utils/modelRenderer\";\nimport SliderController from \"./SliderControllder\";\nimport Basic3DViewer from \"./Basic3DViewer\";\nimport ModelReader from \"../../../../utils/ModelReader\";\nimport { handleWoocommerceVariantUpdateDefault, handleWoocommerceVariantUpdateForSwatchly } from \"../../../../utils/woocommerce\";\n\nconst Viewer = ({ attributes, __, setAttributes, viewerRef, setModelReader }) => {\n  const [isValid, setIsValid] = useState(false);\n  const {\n    loadingPercentage = false,\n    uniqueId,\n    model,\n    models,\n    fullscreen,\n    exposure,\n    variant,\n    multiple,\n    additional,\n    selectedAnimation,\n    animation,\n    autoRotate,\n    rotateDelay,\n    autoplay,\n    rotateAlongX,\n    align,\n    woo,\n    rotationPerSecond,\n    preload,\n    isPagination,\n    isNavigation,\n    zoom,\n    currentViewer = \"modelViewer\",\n    O3DVSettings = {},\n    loading,\n    texture = {},\n    environmentImage: oldEnvironmentImage,\n    zoomLevel = 1,\n    toneMapping,\n    appliedTextures,\n  } = attributes;\n\n  const { isFullscreen } = O3DVSettings;\n\n  const [currentItem, setCurrentItem] = useState(0);\n  const [modelSrc, setModelSrc] = useState(multiple ? models[currentItem]?.modelUrl : model?.modelUrl);\n  // const [currentModel, setCurrentModel] = useState(multiple ? models[currentItem] : model);\n\n  const currentModel = useMemo(() => (multiple ? models[currentItem] : model), [models[currentItem], model]);\n  const [selectedVariants, setSelectedVariants] = useState(null);\n\n  const variantRef = useRef();\n  const animationRef = useRef();\n\n  useEffect(() => {\n    setModelSrc(multiple ? models[currentItem]?.modelUrl : model?.modelUrl);\n  }, [currentItem, multiple, models, model]);\n\n  useEffect(() => {\n    try {\n      new URL(modelSrc);\n      setIsValid(true);\n    } catch (error) {\n      setIsValid(false);\n    }\n\n    setTimeout(() => {\n      modelRenderer({ animation, variant, wrapper: viewerRef.current?.parentElement });\n    }, 10);\n  }, [uniqueId, model, models, multiple, modelSrc]);\n\n  useEffect(() => {\n    if (!autoplay) {\n      viewerRef.current?.pause();\n    }\n  }, [autoplay]);\n\n  useEffect(() => {\n    setTimeout(() => {\n      if (viewerRef.current && animationRef.current) {\n        viewerRef.current.animationName = selectedAnimation;\n        const selectElement = animationRef.current.querySelector(\"select\");\n        selectElement.value = selectedAnimation;\n      }\n    }, 10);\n  }, [selectedAnimation]);\n\n  useEffect(() => {\n    if (variantRef.current) {\n      if (variant) {\n        variantRef.current.style.display = \"inline-block\";\n      } else {\n        variantRef.current.style.display = \"none\";\n      }\n    }\n  }, [variant]);\n\n  useEffect(() => {\n    if (animationRef.current) {\n      if (animation && viewerRef.current.loaded) {\n        animationRef.current.style.display = \"inline-block\";\n      } else {\n        animationRef.current.style.display = \"none\";\n      }\n    }\n  }, [animation, animationRef]);\n\n  useEffect(() => {\n    if (viewerRef.current?.turntableRotation) {\n      viewerRef.current.resetTurntableRotation();\n    }\n  }, [rotateAlongX]);\n\n  useEffect(() => {\n    setTimeout(() => {\n      const { mouseControl, autoplay, shadow, rotate, rotateAlongX, rotateAlongY, loading } = attributes;\n      const skybox = attributes.useEnvironmentAsSkybox ? environmentImage : skyboxImage || null;\n\n      if (viewerRef.current) {\n        mouseControl ? viewerRef.current.setAttribute(\"camera-controls\", \"\") : viewerRef.current.removeAttribute(\"camera-controls\");\n        autoplay ? viewerRef.current.setAttribute(\"autoplay\", \"\") : viewerRef.current.removeAttribute(\"autoplay\");\n        shadow ? viewerRef.current.setAttribute(\"shadow-intensity\", \"1\") : viewerRef.current.removeAttribute(\"shadow-intensity\");\n        shadow ? viewerRef.current.setAttribute(\"shadow-softness\", \"1\") : viewerRef.current.removeAttribute(\"shadow-softness\");\n        loading ? viewerRef.current.setAttribute(\"loading\", loading) : viewerRef.current.removeAttribute(\"loading\");\n\n        if (skybox) {\n          viewerRef.current.setAttribute(\"skybox-image\", skybox);\n        } else {\n          viewerRef.current.removeAttribute(\"skybox-image\");\n        }\n\n        if (autoRotate) {\n          viewerRef.current.setAttribute(\"auto-rotate\", \"\");\n          viewerRef.current.setAttribute(\"auto-rotate-delay\", rotateDelay || 3000);\n          viewerRef.current.setAttribute(\"rotation-per-second\", rotationPerSecond + \"deg\");\n        } else {\n          viewerRef.current.removeAttribute(\"auto-rotate\");\n        }\n\n        rotate ? viewerRef.current.setAttribute(\"camera-orbit\", `${rotateAlongX}deg ${rotateAlongY}deg 105%`) : viewerRef.current.removeAttribute(\"camera-orbit\");\n        viewerRef.current.setAttribute(\"reveal\", preload);\n        viewerRef.current.dataset.animation = selectedAnimation;\n        viewerRef.current.setAttribute(\"exposure\", currentModel?.exposure || exposure);\n\n        if (!zoom) {\n          viewerRef.current.setAttribute(\"disable-zoom\", \"\");\n        } else {\n          viewerRef.current.removeAttribute(\"disable-zoom\");\n        }\n\n        viewerRef.current?.addEventListener(\"load\", function () {\n          // applyTexture();\n          viewerRef.current.setAttribute(\"scale\", `${zoomLevel} ${zoomLevel} ${zoomLevel}`);\n        });\n\n        if (viewerRef.current?.loaded) {\n          viewerRef.current.setAttribute(\"scale\", `${zoomLevel} ${zoomLevel} ${zoomLevel}`);\n        }\n      }\n\n      setTimeout(() => {\n        rotate ? viewerRef.current?.setAttribute(\"camera-orbit\", `${rotateAlongX}deg ${rotateAlongY}deg 105%`) : viewerRef.current?.removeAttribute(\"camera-orbit\");\n      }, 500);\n    }, 10);\n  }, [uniqueId, attributes]);\n\n  useEffect(() => {\n    const runFistAttempt = async () => {\n      const modelReader = new ModelReader(viewerRef.current);\n\n      setModelReader(modelReader);\n      modelReader.onReady(() => {\n        modelReader.applyTexture(appliedTextures);\n      });\n      window.appliedTextures = appliedTextures;\n    };\n\n    // viewerRef.current value is null if use runFirstAttempt directly without setTimeout\n    setTimeout(() => {\n      if (viewerRef?.current?.loaded) {\n        runFistAttempt();\n      } else {\n        viewerRef?.current?.addEventListener(\"load\", runFistAttempt);\n      }\n    }, 20);\n\n    return () => {\n      viewerRef.current?.removeEventListener(\"load\", runFistAttempt);\n    };\n  }, [model.modelUrl, currentViewer]);\n\n  useEffect(() => {\n    if (woo) {\n      // woocommerce default template\n      handleWoocommerceVariantUpdateDefault(setSelectedVariants);\n\n\n      // change model when change variation | Swatchly  WooCommerce Variation Swatches\n      if (container.current) {\n        const slickItem = document.querySelector(\".wl-single-slider:not(.slick-cloned)\");\n        if (slickItem && !slickItem.querySelector(\".modelViewerBlock\")) {\n          slickItem.append(container.current.parentElement);\n          container.current.parentElement.style.display = \"none\";\n          setTimeout(() => {\n            // container.current.style.height = `calc(${getComputedStyle(container.current).height} - 100px)`;\n          }, 100);\n        }\n        // swatchly plugin\n        handleWoocommerceVariantUpdateForSwatchly(setSelectedVariants)\n      }\n\n      setTimeout(() => {\n        const targetElement = document.querySelector(\".select2-selection__rendered\");\n        // Create a new MutationObserver\n        const observer = new MutationObserver(function (mutationsList) {\n          // This callback function will be called when the innerText changes\n          for (const mutation of mutationsList) {\n            if (mutation.type === \"childList\" && mutation.target === targetElement) {\n              const modelItem = models.find((item) => item.product_variant === targetElement.innerText) || models.find((item) => item.product_variant === \"all\") || models?.[0];\n              setModelSrc(modelItem.modelUrl);\n\n            }\n          }\n        });\n\n        // Configure and start observing the target element\n        if (targetElement) {\n          const config = { childList: true, subtree: true };\n          observer.observe(targetElement, config);\n        }\n      }, 1000);\n    }\n\n    return () => {\n      // variantElement?.removeEventListener(\"change\", onVariationChange);\n    }\n  }, [woo]);\n\n  useEffect(() => {\n    if (currentModel.arEnabled && viewerRef.current) {\n      setTimeout(() => {\n        const { arEnabled, arPlacement = \"floor\", arMode = \"quick-look\", modelISOSrc } = currentModel || {};\n        if (arEnabled) {\n          viewerRef.current.setAttribute(\"ar\", \"\");\n          viewerRef.current.setAttribute(\"ar-placement\", arPlacement);\n          viewerRef.current.setAttribute(\"ar-mode\", arMode);\n          viewerRef.current.setAttribute(\"ios-src\", modelISOSrc);\n          // viewerRef.current.setAttribute(\"ar-scale\", scale);\n          viewerRef.current.removeAttribute(\"ar-status\");\n        } else {\n          viewerRef.current.removeAttribute(\"ar\");\n          viewerRef.current.removeAttribute(\"ar-placement\");\n          viewerRef.current.removeAttribute(\"ar-mode\");\n          // viewerRef.current.removeAttribute(\"ar-scale\");\n        }\n      }, 100);\n    }\n  }, [currentModel]);\n\n  const modelPoster = currentModel?.poster;\n  const skyboxImage = currentModel.skyboxImage;\n  const environmentImage = currentModel.environmentImage || oldEnvironmentImage;\n\n  // useEffect(() => {}, [model]);\n\n  const container = useRef();\n\n  // update model when change variation\n  useEffect(() => {\n\n    if (typeof selectedVariants !== \"object\" || !selectedVariants) return;\n    if (Object.values(selectedVariants).every(v => v !== null && v !== '' && v !== undefined)) {\n      const modelItem = models.find((item) => {\n        const firstVariant = Object.keys(selectedVariants)[0];\n        // match one variant if it's a old version\n        if (!item[firstVariant]) {\n          return [selectedVariants[firstVariant], 'all'].includes(item.product_variant);\n        } else {\n\n          // Match all variant keys and values\n          return Object.entries(selectedVariants).every(\n            ([key, value]) => {\n              return [value, 'all'].includes(item[key]);\n            }\n          );\n\n        }\n\n      }) || models?.[1];\n\n      setModelSrc(modelItem?.modelUrl);\n    }\n\n  }, [selectedVariants])\n\n  if (!modelSrc) {\n    return <></>;\n  }\n\n  return (\n    <div ref={container} id={`${uniqueId}`} className={`modelViewerBlock b3dviewer align${align} ${woo ? \"woocommerce\" : \"\"} ${isPagination && multiple ? \"modelPagination\" : \"\"}`}>\n      <div id={additional?.ID || \"additional_id\"} className={`${additional?.Class} b3dviewer-wrapper bp_model_parent`}>\n        <Style attributes={attributes} />\n\n        {modelSrc && isValid && (\n          <>\n            {/* {[\"glb\", \"gltf\"].includes(modelSrc?.split(\".\")?.pop()) ? ( */}\n            {currentViewer === \"modelViewer\" ? (\n              <model-viewer\n                // ar\n                loading={loading ? loading : \"auto\"}\n                camera-controls\n                ref={viewerRef}\n                data-js-focus-visible\n                data-decoder={multiple ? models[0]?.decoder : model?.decoder}\n                poster={modelPoster?.replace(/https?:/, window.location.protocol)}\n                src={modelSrc?.replace(/https?:/, window.location.protocol)}\n                exposure={currentModel?.exposure || exposure}\n                alt=\"A 3D model\"\n                scale={`1 1 1`}\n                environment-image={environmentImage}\n                channel={texture.type}\n                texture={texture.image}\n                skybox-image={skyboxImage}\n                tone-mapping={toneMapping}\n                ar={currentModel.arEnabled}\n                ar-placement={currentModel.arPlacement || 'floor'}\n                ar-modes={\"webxr scene-viewer quick-look\"}\n                ar-scale={currentModel.arScale || 'auto'}\n              >\n                {/* <button slot=\"ar-button\" style={{ backgroundColor: \"white\", borderRadius: \"4px\", border: \"none\", position: \"absolute\", top: \"16px\", right: \"16px\" }} id=\"ar-buttdon\">\n                  View in your space\n                </button> */}\n                {/* <button slot=\"ar-button\" className=\"activate_ar\">\n                  Activate AR\n                </button> */}\n                {/* <button slot=\"ar-button\" style=\"background-color: white; border-radius: 4px; border: none; position: absolute; top: 16px; right: 16px; \">\n                   Activate AR\n                </button> */}\n                <button type=\"button\" slot=\"poster\" id=\"default-poster\" aria-label=\"A 3D model\" style={modelPoster ? { backgroundImage: ` url(\"${modelPoster?.replace(/https?:/, window.location.protocol)}\")` } : {}}></button>\n\n                {/* {loadingPercentage && viewerRef.current && !viewerRef.current?.loaded && ( */}\n                {loadingPercentage &&\n                  !viewerRef.current?.loaded && ( // working fine on frontend with this condition\n                    <div className=\"percentageWrapper\" slot=\"progress-bar\">\n                      <div className=\"overlay\"></div>\n                      <span className=\"percentage\">0%</span>\n                    </div>\n                  )}\n                <div className=\"variantWrapper select\" ref={variantRef}>\n                  {__(\"Variant\", \"model-viewer\")} <select id=\"variant\"></select>\n                </div>\n                <div className=\"animationWrapper select\" ref={animationRef}>\n                  {__(\"Animations\", \"model-viewer\")} <select id=\"animations\"></select>\n                </div>\n                {multiple && !woo && isPagination && (\n                  <div className=\"slider\">\n                    <div className=\"slides\">\n                      {models.map((model, index) => (\n                        <button key={index} className={`slide ${index === 0 ? \"selected\" : \"\"} ${model.poster ? \"\" : \"slide-number\"}`} data-source={model?.modelUrl} data-poster={model?.poster} onClick={() => setCurrentItem(index)}>\n                          {model.poster ? <img src={model?.poster} /> : <span>{index + 1}</span>}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {multiple && isNavigation && models.length > 1 && <SliderController currentItem={currentItem} setCurrentItem={setCurrentItem} models={models} />}\n              </model-viewer>\n            ) : (\n              <>\n                {/* {__(\"This format does not support this plugin\", \"model-viewer\")} */}\n                <Basic3DViewer __={__} setAttributes={setAttributes} modelSrc={modelSrc} currentItem={currentItem} setCurrentItem={setCurrentItem} model={modelSrc} attributes={attributes} />\n              </>\n            )}\n          </>\n        )}\n\n        {modelSrc === \"\" && models[currentItem].poster && (\n          <>\n            {woo && models.length > 1 && <SliderController currentItem={currentItem} setCurrentItem={setCurrentItem} models={models} />}\n            <img src={models[currentItem].poster} />\n          </>\n        )}\n        {/* Thumbnails for woocommerce product */}\n        {((fullscreen && currentViewer === \"modelViewer\") || (currentViewer === \"O3DViewer\" && isFullscreen)) && (\n          <>\n            <FullscreenOpen element={container.current?.querySelector(\".bp_model_parent\")} />\n            <Close element={container.current?.querySelector(\".bp_model_parent\")} />\n          </>\n        )}\n      </div>\n      {woo && isPagination && (\n        <div className=\"modelThumbs\">\n          {models.map((item, index) => {\n            return <>{item.poster && <img className={`thumbsItem ${index === currentItem ? \"selected\" : \"\"}`} onClick={() => setCurrentItem(index)} src={item.poster} />}</>;\n          })}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Viewer;\n","import createSelector from \"./createSelector\";\n\nconst modelRenderer = (params = {}) => {\n    const { animation = false, variant = false, wrapper } = params;\n    if (!wrapper) {\n        return;\n    }\n\n    //model viewer\n    const modelViewer = wrapper.querySelector(\"model-viewer\");\n    if (!modelViewer) return false;\n\n    if (modelViewer.src) {\n        try {\n            const source = new URL(modelViewer.src);\n            if (source?.protocol !== window.location.protocol) {\n                modelViewer.src = source.href.replace(source.protocol, window.location.protocol);\n            }\n        } catch (error) {\n            console.warn(error.message, modelViewer.src);\n        }\n    }\n\n    const selectedAnimation = modelViewer.dataset.animation;\n\n    const select = wrapper.querySelector(\"#variant\");\n    const animations = wrapper.querySelector(\"#animations\");\n    const percentageWrapper = wrapper.querySelector(\".percentageWrapper\");\n    const percentageElement = percentageWrapper?.querySelector(\".percentage\");\n\n    if (percentageWrapper && (modelViewer.reveal === \"interaction\" || modelViewer.loaded)) {\n        percentageWrapper.style.display = \"none\";\n    }\n\n    modelViewer.addEventListener(\"load\", () => {\n        createSelector(select, modelViewer.availableVariants, \"\", variant);\n        createSelector(animations, modelViewer.availableAnimations, selectedAnimation, animation);\n        modelViewer.animationName = selectedAnimation;\n\n        setTimeout(() => {\n            if (percentageWrapper) {\n                percentageWrapper.style.display = \"none\";\n            }\n        }, 100);\n    });\n\n    // hide the percentage wrapper if by chance  it does not hide after loading the model\n    const interval = setInterval(() => {\n        if (modelViewer.loaded) {\n            clearInterval(interval);\n        }\n        if (percentageWrapper) {\n            percentageWrapper.style.display = \"none\";\n        }\n    }, 5000);\n\n    //show percentage\n    if (percentageElement) {\n        modelViewer.addEventListener(\"progress\", (event) => {\n            percentageWrapper.style.display = \"block\";\n            percentageElement.innerHTML = parseInt(event.detail.totalProgress * 100) + \"%\";\n        });\n    }\n\n    select &&\n        select.addEventListener(\"input\", (event) => {\n            modelViewer.variantName = event.target.value;\n        });\n    animations &&\n        animations.addEventListener(\"input\", (event) => {\n            modelViewer.animationName = event.target.value;\n        });\n\n    // slides\n    const slides = wrapper.querySelectorAll(\".slide\");\n    for (const slide of slides) {\n        slide.addEventListener(\"click\", (e) => {\n            e.preventDefault();\n            modelViewer.src = slide?.dataset?.source;\n            modelViewer.poster = slide?.dataset?.poster;\n            slides.forEach((element) => {\n                element.classList.remove(\"selected\");\n            });\n            slide.classList.add(\"selected\");\n            if (select) select.innerHTML = \"\";\n        });\n    }\n\n    document.querySelector(\".slider\")?.addEventListener(\"beforexrselect\", (ev) => {\n        ev.preventDefault();\n    });\n    // });\n}\nexport default modelRenderer;","/**\n * \n * @param {function} setSelectedVariants // state Setter\n * @returns \n */\nexport const handleWoocommerceVariantUpdateForSwatchly = (setSelectedVariants) => {\n    const parentEl = document.querySelector('table.variations');\n    if (!parentEl) return;\n    const labels = parentEl.querySelectorAll('.label label');\n    const variations = {}\n    labels?.forEach(label => {\n        variations[`attribute_${label.getAttribute('for')}`] = \"\";\n    });\n    setSelectedVariants(variations);\n\n    parentEl.querySelectorAll('tr')?.forEach(row => {\n        const attr = row?.querySelector('.label label')?.getAttribute('for');\n        row.querySelectorAll('.swatchly-swatch')?.forEach(el => {\n            el.addEventListener('click', () => {\n                variations[`attribute_${attr}`] = el.getAttribute('data-attr_value');\n                setSelectedVariants((oldData) => {\n                    return { ...oldData, [`attribute_${attr}`]: el.getAttribute('data-attr_value') }\n                });\n            })\n        })\n    });\n}\n\n\nexport const handleWoocommerceVariantUpdateDefault = (setSelectedVariants) => {\n    document.querySelectorAll(\".variations_form .variations select\")?.forEach((select) => {\n        const variations = {};\n        variations[select.name] = select.value;\n        select.addEventListener(\"change\", function (e) {\n            setSelectedVariants((oldData) => ({\n                ...oldData,\n                [select.name]: select.value,\n            }));\n        });\n        setSelectedVariants(variations);\n    })\n\n}","import { useState, useRef } from \"react\";\nwindow.modelViewerMessages = [];\n\nimport Viewer from \"./../../blocks/3d-viewer/Components/Common/Viewer\";\n\nconst FrontEnd = ({ attributes }) => {\n    const [modelReader, setModelReader] = useState(null);\n    function __(text, textdomain = \"\") {\n        return text;\n    }\n    const viewerRef = useRef();\n    window.modelViewerMessages.push({ attributes, viewerRef });\n    if (attributes) {\n        return <Viewer {...{ attributes, viewerRef, __, modelReader, setModelReader }} />;\n    }\n};\n\nexport default FrontEnd;","import { createRoot } from \"react-dom/client\";\nimport FrontEnd from \"../public/Components/FrontEnd\";\nimport { findParentAnchorTag } from \"../utils\";\n\n\nexport const renderModel = ({ div, dom, position, styles, attributes, isPagination, type }) => {\n    if (position === \"bottom\") {\n        setTimeout(() => {\n            dom.appendChild(div);\n            dom = div;\n            dom.setAttribute(\"style\", `width:${dom.offsetWidth > 0 ? dom.offsetWidth + \"px\" : \"100%\"};height:calc(${styles.height} + ${isPagination ? \"100px\" : \"0px\"})`);\n            const root = createRoot(dom);\n            root.render(<FrontEnd attributes={attributes} />, dom);\n        }, 100);\n    } else if (position === \"top\") {\n        dom.insertBefore(div, dom.firstChild);\n        dom = div;\n        setTimeout(() => {\n            dom.setAttribute(\"style\", `width:${dom.offsetWidth > 0 ? dom.offsetWidth + \"px\" : \"100%\"};height:calc(${styles.height} + ${isPagination ? \"100px\" : \"0px\"})`);\n            const root = createRoot(dom);\n            root.render(<FrontEnd attributes={attributes} />, dom);\n        }, 100);\n    } else {\n        dom.setAttribute(\"style\", `width:${dom.offsetWidth > 0 ? dom.offsetWidth + \"px\" : \"100%\"};height:calc(${styles.height} + ${isPagination && type !== \"popup\" ? \"100px\" : \"0px\"})`);\n        const root = createRoot(dom);\n        root.render(<FrontEnd attributes={attributes} />, dom);\n    }\n\n    // set height of the model like other product\n    if (dom.classList.contains(\"productListItem\")) {\n        const targetSibling = dom.classList.contains('block-theme') ? 'previousElementSibling' : 'nextElementSibling';\n\n        const height = dom[targetSibling]?.offsetHeight;\n\n        if (height) {\n            dom.style.height = height + \"px\";\n            dom[targetSibling].style.display = \"none\";\n            const interval = setTimeout(() => {\n                if (dom.querySelector(\".modelViewerBlock\")) {\n                    clearInterval(interval);\n                    dom.querySelector(\".modelViewerBlock\").style.height = height + \"px\";\n                    dom.querySelector(\".bp_model_parent\").setAttribute(\"style\", `height:${height + \"px\"};min-width: 100%`);\n                    const anchorTag = findParentAnchorTag(dom);\n\n                    anchorTag.addEventListener(\"click\", function (e) {\n                        if (e.target.id === \"openBtn\" || e.target.id === \"closeBtn\" || e.target.tagName === \"MODEL-VIEWER\") {\n                            e.preventDefault();\n                        }\n                    });\n                }\n            }, 500);\n        }\n    }\n};\n\nexport default renderModel;","// import \"./style.scss\";\n// import \"./scss/themes/themes.scss\";\n// import \"./scss/themes/common.scss\";\n// import \"./index.js\";\n\nimport { findParentUntilMultipleChildren, isImageSource, restoreOriginalImageSrc } from \"../utils\";\nimport getClickAbleDom from \"../utils/getClickAbleDom\";\n\n\n\n// Full Screen\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const modelWrapper = document.querySelectorAll(\".modelViewerBlock\");\n\n  setTimeout(() => {\n    Object.values(modelWrapper).map((wrapper) => {\n      const models = wrapper.querySelectorAll(\"model-viewer\") || wrapper.querySelectorAll(\".online_3d_viewer\");\n      const progressElement = wrapper.querySelector(\".progress\");\n\n      models.forEach((model) => {\n        const src = new URL(model?.src || model?.getAttribute(\"src\") || model?.getAttribute(\"model\"));\n        if (model.tagName === \"DIV\") {\n          console.log(\"Advanced viewer\");\n        } else {\n          // add/remove ssl from url depends on website\n          if (src?.protocol !== location?.protocol) {\n            model?.setAttribute(\"src\", src.href.replace(src?.protocol, location?.protocol));\n          }\n\n          if (progressElement) {\n            model?.addEventListener(\"progress\", (e) => {\n              progressElement.innerHTML = parseInt(e.detail.totalProgress * 100) + \"%\";\n            });\n            model?.addEventListener(\"load\", () => {\n              setTimeout(() => {\n                progressElement.style.display = \"none\";\n              }, 500);\n            });\n          }\n\n          model.dataset.items = \"\";\n\n          // set model width for goya theme\n          const productModalContainer = document.querySelector(\".product-modal-wrap\");\n          if (\n            productModalContainer &&\n            !productModalContainer?.nextElementSibling?.classList?.contains(\"entry-summary\") &&\n            !productModalContainer?.nextElementSibling?.classList?.contains(\"mkd-single-product-summary\")\n          ) {\n            // productModalContainer.style.width = \"100%\";\n            productModalContainer.classList.add(\"model-full-width\");\n            const information = document.querySelector(\".showcase-inner .product-information\");\n            if (information) {\n              const model = productModalContainer.querySelector(\"model-viewer\");\n              if (model) {\n                model.style.height = information.offsetHeight + \"px\";\n              }\n            }\n          }\n        }\n      });\n    });\n  }, 1000);\n\n  document.querySelectorAll(\".bp3dv-model-main\")?.forEach((model) => {\n    let selector = model.dataset.selector;\n\n    if (!selector || selector === \"\") {\n      return false;\n    }\n\n    let clickableItem = getClickAbleDom(selector)\n\n    if (clickableItem) {\n      clickableItem?.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        model.classList.add(\"model-open\");\n        window.dispatchEvent(new Event('resize'))\n      });\n\n      clickableItem.style.cursor = \"pointer\";\n\n      model.querySelector(\".close-btn\").addEventListener(\"click\", () => model.classList.remove(\"model-open\"));\n      model.querySelector(\".bg-overlay\").addEventListener(\"click\", () => model.classList.remove(\"model-open\"));\n    } else {\n      console.warn(\"clickable item is not found\", selector);\n    }\n  });\n});\n\n\n\nif (window.jQuery) {\n  jQuery(document).ready(function ($) {\n    $(\".bp3dmodel-carousel\")?.[0]?.slick({\n      slidesToShow: 1,\n      slidesToScroll: 1,\n      arrows: true,\n    });\n  });\n}\n","\nimport { jsonParse } from \"../../../wp-utils/v1\";\nimport getClickAbleDom from \"../utils/getClickAbleDom.js\";\nimport renderModel from \"../utils/renderModel\";\n\nimport \"./product.js\";\n\n/**\n * Render\n */\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    const models = document.querySelectorAll(\".modelViewerBlock\");\n    if (window.domRendered) {\n        return;\n    }\n    window.domRendered = true;\n    models.forEach((dom) => {\n        const dataset = { ...dom.dataset } || {};\n        setTimeout(() => {\n            Object.keys(dom.dataset).map((key) => delete dom.dataset[key]);\n        }, 10);\n\n        const attributes = jsonParse(dataset.attributes);\n\n        if (attributes) {\n            const selector = dataset.selector;\n            const position = dataset.position;\n            const unique_class = dataset.uniqueClass;\n            const type = dataset.type;\n            const { isPagination, styles } = attributes;\n\n            const div = document.createElement(\"div\");\n            if (selector && getClickAbleDom(selector)) {\n                Object.keys(dom.dataset).map((key) => delete dom.dataset[key]);\n                dom = getClickAbleDom(selector);\n\n            } else {\n                window.modelViewerMessages.push({ dom, selector, message: \"does not have any dom with this selector\" });\n            }\n            if (!attributes?.currentViewer || attributes.currentViewer === \"modelViewer\") {\n                dom.setAttribute(\"data-rendered\", \"true\");\n                div.classList.add(\"woocommerce-product-model-viewer-wrapper\");\n                div.classList.add(`position_${position}`);\n                dom.classList.add(`product_${unique_class}`);\n                renderModel({ div, dom, position, styles, isPagination, attributes, type });\n                const Src = document.getElementById(\"bp3d-model-viewer-js\");\n                if (!Src) {\n                    const script = document.createElement(\"script\");\n                    script.type = \"module\";\n                    script.id = \"bp3d-model-viewer-js\";\n                    script.src = window[\"bp3dBlock\"]?.modelViewerSrc;\n                    document.head.appendChild(script);\n                }\n            }\n            if (attributes.currentViewer === \"O3DViewer\") {\n                const Src = document.getElementById(\"bp3d-o3dviewer-js\");\n                if (!Src) {\n                    const script = document.createElement(\"script\");\n                    script.id = \"bp3d-o3dviewer-js\";\n                    script.src = window[\"bp3dBlock\"]?.o3dviewerSrc;\n                    document.head.appendChild(script);\n                    script.addEventListener(\"load\", () => {\n                        renderModel({ div, dom, position, styles, isPagination, attributes, type });\n                    });\n                } else {\n                    Src.addEventListener(\"load\", () => {\n                        renderModel({ div, dom, position, styles, isPagination, attributes, type });\n                    });\n                }\n            }\n        }\n    });\n});\n\n\n","const jsonParse = (json) => {\r\n  let parsedJson = null;\r\n  try {\r\n    parsedJson = JSON.parse(json);\r\n  } catch (error) {\r\n    console.warn(error.message);\r\n  }\r\n  return parsedJson;\r\n};\r\n\r\nexport default jsonParse;\r\n"],"names":["module","exports","window","m","createRoot","hydrateRoot","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","g","globalThis","this","Function","e","scriptUrl","importScripts","location","document","currentScript","tagName","toUpperCase","src","scripts","getElementsByTagName","length","i","test","Error","replace","p","hex","type","r","b","a","includes","match","map","Number","result","exec","parseInt","constructor","model","copy","thumbnailsById","Map","thumbnail_size","textures","texturesArray","textureChannels","defaultMaterialData","initialized","sizes","readyCallbacks","isReady","loaded","onLoad","addEventListener","bind","initialize","forEach","callback","onReady","push","modelUrl","getDefaultMaterialData","createThumbnails","pagenow","loadModelWithoutAppending","Date","now","materials","getTextureId","gltfImage","_gltfImage$uri","uri","bufferView","toString","getTextures","Object","keys","getBlobFileSize","blobUrl","response","fetch","ok","blob","size","error","console","pushThumbnail","textureInfo","texture","source","id","has","objectUrl","createThumbnail","set","material","ensureLoaded","pbrMetallicRoughness","normalTexture","emissiveTexture","occlusionTexture","baseColorTexture","metallicRoughnessTexture","getAllMaterialData","warn","materialsData","async","materialName","name","Math","random","substr","baseColor","factor","baseColorFactor","metallicRoughness","metallicFactor","roughnessFactor","normal","emissive","emissiveFactor","occlusion","updateMaterialTextureAndFactor","channel","textureUri","textureName","setBaseColorFactor","rgbaStringToFactor","setMetallicFactor","setRoughnessFactor","setEmissiveFactor","setTexture","log","createTexture","getMaterialByName","applyTexture","appliedTextures","modelReader","url","textureImage","getTextureByName","entries","matName","channels","ch","shakeMaterialFactor","duration","originalFactor","slice","setTimeout","getTextureURIByName","getTexturesArray","getTextureChannels","label","value","getMaterialsNameForSelectControl","Array","isArray","item","replaceAll","getFirstMaterialName","getTextureById","textureId","get","downloadTexture","canvas","createElement","width","height","ctx","getContext","image","Image","crossOrigin","onload","drawImage","link","href","toDataURL","download","click","onerror","deepCloneModel","clonedModel","originalModel","clone","traverse","node","isMesh","geometry","needsUpdate","Promise","resolve","reject","modelViewer","setAttribute","style","display","body","appendChild","message","createCopy","restoreOriginalImageSrc","imageSrc","isImageSource","str","sRGBToLinear","rgbaString","color","_","getClickAbleDom","selector","clickableItem","querySelector","element","parent","parentElement","children","findParentUntilMultipleChildren","innerHTML","classList","add","host","Style","attributes","styles","uniqueId","woo","progressBar","additional","progressBarColor","thumbSize","CSS","setCSS","useState","useEffect","desktop","bgColor","bgImage","tablet","mobile","FullscreenOpen","onClick","handleClick","requestFullscreen","viewBox","xmlns","fill","className","fillRule","d","Close","exitFullscreen","webkitExitFullscreen","msExitFullscreen","remove","stroke","strokeWidth","createSelector","options","selected","show","option","textContent","SliderController","currentItem","setCurrentItem","models","Fragment","ModelPagination","isPagination","multiple","index","key","poster","Button","props","modelSrc","setAttributes","__","O3DVSettings","isNavigation","camera","mouseControl","zoom","showEdge","edgeColor","viewerLoaded","setViewerLoaded","parentDiv","useRef","viewerRef","instanceRef","current","Destroy","defaultCamera","OV","Camera","Coord3D","values","eye","center","up","EmbeddedViewer","backgroundColor","RGBAColor","edgeSettings","EdgeSettings","RGBColor","environmentSettings","EnvironmentSettings","posx","posy","posz","negx","negy","negz","LoadModelFromUrlList","VR","viewer","navigation","SetZoomStatus","SetCamera","renderer","resetState","Clear","getExtension","loseContext","tempClone","cloneNode","parentNode","replaceChild","removeChild","hexToRGB","SetBackgroundColor","Resize","offsetWidth","offsetHeight","Render","SetEdgeSettings","ref","role","modelLoader","inProgress","variant","originalObject","GetCamera","JSON","parse","stringify","Viewer","setModelReader","isValid","setIsValid","loadingPercentage","fullscreen","exposure","selectedAnimation","animation","autoRotate","rotateDelay","autoplay","rotateAlongX","align","rotationPerSecond","preload","currentViewer","loading","environmentImage","oldEnvironmentImage","zoomLevel","toneMapping","isFullscreen","setModelSrc","currentModel","useMemo","selectedVariants","setSelectedVariants","variantRef","animationRef","URL","modelRenderer","params","wrapper","protocol","dataset","select","animations","percentageWrapper","percentageElement","reveal","availableVariants","availableAnimations","animationName","interval","setInterval","clearInterval","event","detail","totalProgress","variantName","target","slides","querySelectorAll","slide","preventDefault","ev","pause","turntableRotation","resetTurntableRotation","shadow","rotate","rotateAlongY","skybox","useEnvironmentAsSkybox","skyboxImage","removeAttribute","runFistAttempt","ModelReader","removeEventListener","variations","oldData","handleWoocommerceVariantUpdateDefault","container","slickItem","append","parentEl","labels","getAttribute","row","attr","el","handleWoocommerceVariantUpdateForSwatchly","targetElement","observer","MutationObserver","mutationsList","mutation","modelItem","find","product_variant","innerText","config","childList","subtree","observe","arEnabled","arPlacement","arMode","modelISOSrc","modelPoster","every","v","firstVariant","ID","Class","decoder","alt","scale","ar","arScale","slot","backgroundImage","Basic3DViewer","modelViewerMessages","FrontEnd","text","textdomain","renderModel","div","dom","position","render","insertBefore","firstChild","contains","targetSibling","findParentAnchorTag","modelWrapper","progressElement","items","productModalContainer","nextElementSibling","information","dispatchEvent","Event","cursor","jQuery","ready","$","slick","slidesToShow","slidesToScroll","arrows","domRendered","json","parsedJson","jsonParse","unique_class","uniqueClass","getElementById","script","modelViewerSrc","head","Src","o3dviewerSrc"],"sourceRoot":""}