(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&"SCRIPT"===r.currentScript.tagName.toUpperCase()&&(t=r.currentScript.src),!t)){var a=r.getElementsByTagName("script");if(a.length)for(var n=a.length-1;n>-1&&(!t||!/^http(s?):/.test(t));)t=a[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t+"../../"})();const t=window.React,r=({attributes:e})=>{const{styles:r,uniqueId:a,woo:n,progressBar:l,additional:s}=e,{progressBarColor:o,thumbSize:i="90px"}=r,[c,u]=(0,t.useState)(null);return(0,t.useEffect)(()=>{const e=`\n        #${a} {\n            width: ${r?.width?.desktop||r.width};\n            height: calc(${r?.height?.desktop||r.height});\n        }\n        .pop-up-content-wrap #${a} {\n            height: ${r?.height?.desktop||r.height};\n        }\n        #${a} .select {display: none}\n        \n        #${a} model-viewer {\n            background: ${r?.bgColor} ${r?.bgImage?`url(${r?.bgImage})`:" "} no-repeat center center;\n            background-size: cover;\n        }\n        #${a} model-viewer::part(default-progress-bar) {\n             display: ${l?"block":"none"}\n        }\n        #${a} .online_3d_viewer,\n        #${a} .b3dviewer-wrapper {\n            width: ${n?"100%":`${r?.width.desktop||r.width}`};\n            height: ${r?.height.desktop||r.height};\n        }\n        @media screen and (max-width: 1024px){\n            #${a} .online_3d_viewer,\n            #${a} .b3dviewer-wrapper {\n                width: ${n?"100%":`${r?.width.tablet||r.width}`};\n                height: ${r?.height.tablet||r.height};\n            }\n        }\n        @media screen and (max-width: 640px){\n            #${a} .online_3d_viewer,\n            #${a} .b3dviewer-wrapper {\n                width: ${n?"100%":`${r?.width.mobile||r.width}`};\n                height: ${r?.height.mobile||r.height};\n            }\n        }\n        #${a} model-viewer::part(default-progress-bar){\n            background: ${o};\n        }\n        #${a} .slides .slide{\n            width: ${i};\n            height: ${i};\n            padding: calc(${i} * 0.04);\n        }\n        #${a} .slide-number span{\n            font-size: calc(${i} * 0.8);\n        }\n        ${s?.CSS}\n    `.replaceAll(/\n?\s\s/g,"");u(e)},[a,r,s,l]),(0,t.createElement)("style",null,c)},a=({element:e})=>(0,t.createElement)("svg",{onClick:()=>{e&&("function"==typeof e.requestFullscreen?e.requestFullscreen():e.classList.add("fullscreen"))},id:"openBtn",width:"24px",height:"24px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"#222",className:"bi bi-arrows-fullscreen"},(0,t.createElement)("path",{fillRule:"even",d:"M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707zm0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707zm-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707z"})),n=({element:e})=>(0,t.createElement)("svg",{id:"closeBtn",onClick:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),e?.classList.remove("fullscreen")},className:"sidebar-open",width:"34px",height:"34px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("path",{fill:"none",stroke:"#f2f2f2",strokeWidth:"2",d:"M7,7 L17,17 M7,17 L17,7"})),l=(e,t=[],r,a=!0)=>{if(e?.parentElement){a&&(e.parentElement.style.display="inline-block"),e.innerHTML="",!t.length&&e.parentElement&&(window.location.href.includes("wp-admin")?t[0]="not available":e.parentElement.style.display="none");for(const a of t){const t=document.createElement("option");t.value=a,t.textContent=a,e.appendChild(t),a===r&&(t.selected=!0)}}},s=({currentItem:e,setCurrentItem:r,models:a})=>(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"slideController"},(0,t.createElement)("svg",{fill:"#000000",onClick:()=>r(e>0?e-1:e),className:"arrow-left "+(e>0?"":"disabled"),width:"24px",height:"24px",viewBox:"-78.5 0 512 512",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("title",null,"left"),(0,t.createElement)("path",{d:"M257 64L291 98 128 262 291 426 257 460 61 262 257 64Z"})),(0,t.createElement)("svg",{onClick:()=>r(e<a.length-1?e+1:e),fill:"#000000",className:"arrow-right "+(e<a.length-1?"":"disabled"),width:"24px",height:"24px",viewBox:"-77 0 512 512",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("title",null,"right"),(0,t.createElement)("path",{d:"M98 460L64 426 227 262 64 98 98 64 294 262 98 460Z"})))),o=e.p+"images/posx.636c229f.jpg",i=e.p+"images/posy.0722c73e.jpg",c=e.p+"images/posz.829f9244.jpg",u=e.p+"images/negx.dad27d20.jpg",d=e.p+"images/negy.ef9d1d19.jpg",m=e.p+"images/negz.a6842016.jpg",h=function(e,t="string"){if(e){if("transparent"===e)return{r:255,g:255,b:255,a:0};if(e.includes("rgba")){const t=e.match(/rgba?\((\d+),(\d+),(\d+)(?:,([\d.]+))?\)/);if(t){const[,e,r,a,n=1]=t.map(Number);return{r:e,g:r,b:a,a:n}}return null}var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e.replace("#",""));return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),a:parseInt(r[4],16)?parseInt(r[4],16):0===parseInt(r[4],16)?0:255}:null}},p=({attributes:e,currentItem:r,setCurrentItem:a,isPagination:n})=>{const{multiple:l,woo:s,models:o}=e;return(0,t.createElement)(t.Fragment,null,l&&!s&&n&&(0,t.createElement)("div",{className:"slider"},(0,t.createElement)("div",{className:"slides"},o.map((e,n)=>(0,t.createElement)("button",{key:n,className:`slide ${n===r?"selected":""} ${e.poster?"":"slide-number"}`,"data-source":e?.modelUrl,"data-poster":e?.poster,onClick:()=>a(n)},e.poster?(0,t.createElement)("img",{src:e?.poster}):(0,t.createElement)("span",null,n+1))))))},g=class{constructor(e){window.model=e,this.model=e,this.copy=null,this.thumbnailsById=new Map,this.thumbnail_size=256,this.textures=[],this.texturesArray=[],this.textureChannels=[],this.defaultMaterialData=null,this.initialized=!1,this.sizes=[],this.copy=null,this.readyCallbacks=[],this.isReady=!1,this.model.loaded?this.onLoad():this.model.addEventListener("load",this.onLoad.bind(this))}initialize(){this.isReady=!0,this.readyCallbacks.forEach(e=>e()),this.readyCallbacks=[]}onReady(e){this.isReady?e():this.readyCallbacks.push(e)}async onLoad(){if(this.modelUrl=this.model.src,this.getDefaultMaterialData(),this.thumbnailsById=await this.createThumbnails(),window.pagenow){const e=await this.loadModelWithoutAppending(this.model.src+"?"+Date.now());this.copy=e.model;const t=await this.createThumbnails(new Map,this.copy.materials);this.copy.thumbnailsById=t}this.initialize()}getTextureId(e){var t;return null!==(t=e.uri)&&void 0!==t?t:e.bufferView.toString()}async getTextures(){return 0===Object.keys(this.textures).length&&this.model&&await this.createThumbnails(),this.textures}async getBlobFileSize(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch the Blob URL");return(await t.blob()).size}catch(e){return console.error("Error getting Blob file size:",e),null}}async pushThumbnail(e,t){const{texture:r}=t||{};if(!r||!r.source)return null;const a=this.getTextureId(r.source);if(!e.has(a)){const t=await r.source.createThumbnail(this.thumbnail_size,this.thumbnail_size),n=await this.getBlobFileSize(t);e.set(a,{objectUrl:t,texture:r,size:n,id:a}),this.textures[a]||(this.texturesArray.push(a),this.textures[a]=t,this.sizes[a+"_"+n]=t)}return a}async createThumbnails(e,t=this.model.model?.materials){e||(e=new Map);for(const r of t||[]){await r.ensureLoaded();const{pbrMetallicRoughness:t,normalTexture:a,emissiveTexture:n,occlusionTexture:l}=r,{baseColorTexture:s,metallicRoughnessTexture:o}=t;await this.pushThumbnail(e,a),await this.pushThumbnail(e,n),await this.pushThumbnail(e,l),await this.pushThumbnail(e,s),await this.pushThumbnail(e,o)}return e}getAllMaterialData(){if(!this.model.model)return console.warn("Model not loaded yet."),{};const e={};return this.model.model.materials.forEach(async t=>{await t.ensureLoaded();const r=t.name||`Material_${Math.random().toString(36).substr(2,5)}`;e[r]={baseColor:{texture:{name:t.pbrMetallicRoughness.baseColorTexture?.texture?.source.name||null,uri:t.pbrMetallicRoughness.baseColorTexture?.texture?.source.uri||null},factor:t.pbrMetallicRoughness.baseColorFactor||[1,1,1,1]},metallicRoughness:{texture:{name:t.pbrMetallicRoughness.metallicRoughnessTexture?.texture?.source.name||null,uri:t.pbrMetallicRoughness.metallicRoughnessTexture?.texture?.source.uri||null},factor:[t.pbrMetallicRoughness.metallicFactor||1,t.pbrMetallicRoughness.roughnessFactor||1]},normal:{texture:{uri:t.normalTexture?.texture?.source.uri||null,name:t.normalTexture?.texture?.source.name||null}},emissive:{texture:{name:t.emissiveTexture?.texture?.source.name||null,uri:t.emissiveTexture?.texture?.source.uri||null},factor:t.emissiveFactor||[0,0,0]},occlusion:{texture:{name:t.occlusionTexture?.texture?.source.name||null,uri:t.occlusionTexture?.texture?.source.uri||null}}}}),e}getDefaultMaterialData(){return this.defaultMaterialData||(this.defaultMaterialData=this.getAllMaterialData()),this.defaultMaterialData}async updateMaterialTextureAndFactor(e,t,r,a=null,n=`texture_${Date.now()}`){if(this.model?.model&&e)if(r&&("baseColor"===t&&e.pbrMetallicRoughness.setBaseColorFactor(w(r)),"metallicRoughness"===t&&(e.pbrMetallicRoughness.setMetallicFactor(r[0]),e.pbrMetallicRoughness.setRoughnessFactor(r[1])),"emissive"===t&&e.setEmissiveFactor(w(r))),"default"!==a){if(!a)return t.includes("base")||t.includes("metallic")?e.pbrMetallicRoughness[t+"Texture"].setTexture(null):e[t+"Texture"].setTexture(null),void console.log(`Removed texture from '${t}' of material '${e.name}'.`);try{"string"==typeof a&&((a=await this.model.createTexture(a)).name=n),t.includes("base")||t.includes("metallic")?e.pbrMetallicRoughness[t+"Texture"].setTexture(a):e[t+"Texture"].setTexture(a),console.log(`Applied new texture ${n} to '${t}' of material '${e.name}'.`)}catch(e){console.error("Error creating texture:",e)}}else{if(t.includes("base")||t.includes("metallic")){const r=this.copy.getMaterialByName(e.name).pbrMetallicRoughness[t+"Texture"].texture;e.pbrMetallicRoughness[t+"Texture"].setTexture(r)}else{const r=this.copy.getMaterialByName(e.name)[t+"Texture"].texture;e[t+"Texture"].setTexture(r)}console.log(`Removed texture from '${t}' of material '${e.name}'.`)}else console.warn("Model or Material not found.")}async applyTexture(e,t=null,r=null){if(window.modelReader=this,e){if(t&&r){const{name:a,url:n}=e[t]?.[r]?.texture||{},l=this.model?.model?.getMaterialByName(t);let s=n||this.getTextureByName(a);e[t]?.[r]?.texture||(s="default");const o=e[t]?.[r]?.factor||null;return void this.updateMaterialTextureAndFactor(l,r,o,s,a)}Object.entries(e).forEach(([e,t])=>{const r=this.model?.model?.getMaterialByName(e);r?Object.keys(t).forEach(e=>{const{name:a,url:n}=t[e]?.texture||{};let l=n||this.getTextureByName(a);t[e]?.texture||(l="default");const s=t[e]?.factor||null;this.updateMaterialTextureAndFactor(r,e,s,l,a)}):console.warn(`Material '${e}' not found.`)})}}async shakeMaterialFactor(e,t=500){if(!e)return;"string"==typeof e&&(e=this.getMaterialByName(e));const r=e.pbrMetallicRoughness.baseColorFactor.slice();e.pbrMetallicRoughness.setBaseColorFactor([1,0,0,1]),setTimeout(()=>{e.pbrMetallicRoughness.setBaseColorFactor(r)},t)}getTextureURIByName(e){return e.includes("blob")?e:this.textures[e]||null}getMaterialByName(e){return this.model.model.getMaterialByName(e)}getTexturesArray(){return this.texturesArray}getTextureChannels(){return[{label:"Base Color",value:"baseColor"},{label:"Metallic Roughness",value:"metallicRoughness"},{label:"Normal Map",value:"normal"},{label:"Emissive",value:"emissive"},{label:"Occlusion",value:"occlusion"}]}getMaterialsNameForSelectControl(){return this.model.loaded?Array.isArray(this.model.model.materials)?this.model.model.materials.map(e=>({label:e.name.replace("_mtl","").replaceAll("_"," "),value:e.name})):[]:(console.warn("Model not loaded yet"),[])}getFirstMaterialName(){return this.model.loaded&&this.model.model?Array.isArray(this.model.model.materials)?this.model.model.materials[0].name:null:(console.warn("Model not loaded yet"),null)}getTextureById(e){return this.thumbnailsById.get(e)}async downloadTexture(e,t=512){const{texture:r=null}=this.getTextureById(e);if(!r)return void console.error("Texture not found!");const a=await r.source.createThumbnail(t,t),n=document.createElement("canvas");n.width=t,n.height=t;const l=n.getContext("2d"),s=new Image;s.crossOrigin="anonymous",s.src=a,s.onload=()=>{l.drawImage(s,0,0,t,t);const r=document.createElement("a");r.href=n.toDataURL("image/png"),r.download=`texture_${e}.png`,r.click()},s.onerror=()=>{console.error("Failed to load texture image.")}}deepCloneModel(){const e=this.model.originalModel.clone(!0);return e.traverse(e=>{e.isMesh&&(e.material&&(e.material=e.material.clone()),e.geometry&&(e.geometry=e.geometry.clone()),e.material.map&&(e.material.map=e.material.map.clone(),e.material.map.needsUpdate=!0))}),e}async loadModelWithoutAppending(e){return new Promise((t,r)=>{const a=document.createElement("model-viewer");a.src=e,a.setAttribute("loading","eager"),a.style.display="none",a.style.height="0",document.body.appendChild(a),a.addEventListener("load",()=>{t(a)}),a.addEventListener("error",e=>{r(new Error(`Model failed to load: ${e.message}`))})})}getTextureByName(e){if(!e)return null;try{if(this.copy?.thumbnailsById)return this.copy.thumbnailsById.get(e).texture;if(this.thumbnailsById)return this.thumbnailsById.get(e)?.texture}catch(t){console.error(t.message,e)}return null}createCopy(){}};function b(e){return(e/=255)<=.04045?e/12.92:((e+.055)/1.055)**2.4}function w(e){if(!["rgba","rgb"].includes((t=e,/^rgba\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*(0|1|0?\.\d+)\s*\)$/i.test(t)?"rgba":!!/^rgb\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*\)$/i.test(t)&&"rgb")))return e;var t;const r=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);if(!r)return null;const[a,n,l,s,o]=r.map(Number);return[b(n),b(l),b(s),o]}const f=e=>(0,t.createElement)("button",{...e}),v=e=>{const{attributes:r,currentItem:a,setCurrentItem:n,modelSrc:l,setAttributes:g,__:b}=e,{styles:v,models:y,multiple:x,O3DVSettings:E}=r,{isNavigation:C,isPagination:T,camera:A,mouseControl:M,zoom:$=!0,showEdge:S=!1,edgeColor:R}=E,[k,N]=(0,t.useState)(!1),V=(0,t.useRef)(null),I=(0,t.useRef)(null),L=(0,t.useRef)(null);return(0,t.useEffect)(()=>{if(l)if(I.current?.Destroy(),I.current?.canvas?.remove(),I.current=null,null===I.current){const e=A&&!x?{camera:new OV.Camera(new OV.Coord3D(...Object.values(A.eye)),new OV.Coord3D(...Object.values(A.center)),new OV.Coord3D(...Object.values(A.up)),45)}:{};L.current=new OV.EmbeddedViewer(V.current,{...e,backgroundColor:new OV.RGBAColor(255,255,255,255),edgeSettings:new OV.EdgeSettings(S,new OV.RGBColor(0,0,0),1),environmentSettings:new OV.EnvironmentSettings([o,i,c,u,d,m],!1)});const t=[l];L.current.LoadModelFromUrlList(t),I.current=L.current,window.VR=L.current,L.current.viewer.navigation.SetZoomStatus($)}else{I.current.LoadModelFromUrlList([l]);const e=new OV.Coord3D(0,0,0);I.current.viewer.SetCamera(new OV.Camera(new OV.Coord3D(0,0,1),e,new OV.Coord3D(0,1,0),45))}return()=>{if(null!==I.current&&null!==V.current&&k){delete I.current.model,I.current.viewer.renderer.resetState(),I.current.viewer.Clear(),I.current.viewer&&delete I.current.viewer,I.current.canvas.getContext("webgl2").getExtension("WEBGL_lose_context").loseContext();const e=I.current.canvas.cloneNode(!0);I.current.canvas.parentNode.replaceChild(e,I.current.canvas),V.current?.removeChild(V.current.children[0]),I.current.canvas?.parentNode?.removeChild(I.current.canvas),I.current.canvas.remove(),I.current=null,N(!1)}}},[l]),(0,t.useEffect)(()=>{h(v.bgColor)&&I.current?.viewer?.SetBackgroundColor(h(v.bgColor)),setTimeout(()=>{I.current?.viewer?.Resize(V.current.offsetWidth,V.current.offsetHeight)},10),I.current.viewer.Render(),window.viewer=I.current},[v,l]),(0,t.useEffect)(()=>{window.addEventListener("resize",()=>{I.current?.viewer?.Resize(V.current?.offsetWidth,V.current?.offsetHeight)})},[]),(0,t.useEffect)(()=>{if(L.current){L.current.viewer.navigation.SetZoomStatus($);const[e=0,t=0,r=0]=w(R)||[];L.current.viewer.SetEdgeSettings(new OV.EdgeSettings(S,new OV.RGBColor(255*e,255*t,255*r),0))}},[$,S,R]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{ref:V,role:"img","aria-label":"Canvas showing the model in the 3D Viewer",className:`${M?"":"DMC"} ${I.current?.modelLoader?.inProgress} relative flex  flex-col items-center justify-center p-2 h-72 w-72 border-2 border-black rounded-sm online_3d_viewer`},(0,t.createElement)(p,{attributes:r,setCurrentItem:n,currentItem:a,isPagination:T}),x&&C&&y.length>1&&(0,t.createElement)(s,{currentItem:a,setCurrentItem:n,models:y}),g&&!x&&(0,t.createElement)("div",{className:"setDefaultViewContainer"},(0,t.createElement)(f,{variant:"primary",className:"setDefaultView button button-primary",onClick:()=>{if(I.current){const t=(e=I.current?.viewer?.GetCamera(),JSON.parse(JSON.stringify(e)));g({O3DVSettings:{...E,camera:t}})}var e}},b(A?"Reset Default View":"Set Default View","model-viewer")),A&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(f,{variant:"primary",className:"setDefaultView button button-primary",onClick:()=>{I.current?.viewer.SetCamera(new OV.Camera(new OV.Coord3D(...Object.values(A.eye)),new OV.Coord3D(...Object.values(A.center)),new OV.Coord3D(...Object.values(A.up)),45))}},b("See Default View","model-viewer")),(0,t.createElement)(f,{variant:"primary",className:"setDefaultView button button-primary",onClick:()=>g({O3DVSettings:{...E,camera:null}})},b("Remove Default View","model-viewer"))))))},y=e.p+"images/loading.0178ea4a.webp",x=({attributes:e,__:o,setAttributes:i,viewerRef:c,setModelReader:u})=>{const[d,m]=(0,t.useState)(!1),{loadingPercentage:h=!1,uniqueId:p,model:b,models:w,fullscreen:f,exposure:x,variant:E,multiple:C,additional:T,selectedAnimation:A,animation:M,autoRotate:$,rotateDelay:S,autoplay:R,rotateAlongX:k,align:N,woo:V,rotationPerSecond:I,preload:L,isPagination:D,isNavigation:_,zoom:B,currentViewer:O="modelViewer",O3DVSettings:F={},loading:z,texture:q={},environmentImage:j,zoomLevel:U=1,toneMapping:P,appliedTextures:H}=e,{isFullscreen:W}=F,[G,Z]=(0,t.useState)(0),[J,X]=(0,t.useState)(C?w[G]?.modelUrl:b?.modelUrl),Y=(0,t.useMemo)(()=>C?w[G]:b,[w[G],b]),[K,Q]=(0,t.useState)(null),ee=(0,t.useRef)(),te=(0,t.useRef)();(0,t.useEffect)(()=>{X(C?w[G]?.modelUrl:b?.modelUrl)},[G,C,w,b]),(0,t.useEffect)(()=>{try{new URL(J),m(!0)}catch(e){m(!1)}setTimeout(()=>{((e={})=>{const{animation:t=!1,variant:r=!1,wrapper:a}=e;if(!a)return;const n=a.querySelector("model-viewer");if(!n)return!1;if(n.src)try{const e=new URL(n.src);e?.protocol!==window.location.protocol&&(n.src=e.href.replace(e.protocol,window.location.protocol))}catch(e){console.warn(e.message,n.src)}const s=n.dataset.animation,o=a.querySelector("#variant"),i=a.querySelector("#animations"),c=a.querySelector(".percentageWrapper"),u=a.querySelector(".loader"),d=c?.querySelector(".percentage");c&&("interaction"===n.reveal||n.loaded)&&(c.style.display="none"),u&&("interaction"===n.reveal||n.loaded)&&(u.style.display="none"),n.addEventListener("load",()=>{l(o,n.availableVariants,"",r),l(i,n.availableAnimations,s,t),n.animationName=s,setTimeout(()=>{c&&(c.style.display="none")},100)});const m=setInterval(()=>{n.loaded&&clearInterval(m),c&&(c.style.display="none")},5e3);d&&n.addEventListener("progress",e=>{c.style.display="block",d.innerHTML=parseInt(100*e.detail.totalProgress)+"%"}),o&&o.addEventListener("input",e=>{n.variantName=e.target.value}),i&&i.addEventListener("input",e=>{n.animationName=e.target.value});const h=a.querySelectorAll(".slide");for(const e of h)e.addEventListener("click",t=>{t.preventDefault(),n.src=e?.dataset?.source,n.poster=e?.dataset?.poster,h.forEach(e=>{e.classList.remove("selected")}),e.classList.add("selected"),o&&(o.innerHTML="")});document.querySelector(".slider")?.addEventListener("beforexrselect",e=>{e.preventDefault()})})({animation:M,variant:E,wrapper:c.current?.parentElement})},10)},[p,b,w,C,J]),(0,t.useEffect)(()=>{R||c.current?.pause()},[R]),(0,t.useEffect)(()=>{setTimeout(()=>{c.current&&te.current&&(c.current.animationName=A,te.current.querySelector("select").value=A)},10)},[A]),(0,t.useEffect)(()=>{ee.current&&(ee.current.style.display=E?"inline-block":"none")},[E]),(0,t.useEffect)(()=>{te.current&&(M&&c.current.loaded?te.current.style.display="inline-block":te.current.style.display="none")},[M,te]),(0,t.useEffect)(()=>{c.current?.turntableRotation&&c.current.resetTurntableRotation()},[k]),(0,t.useEffect)(()=>{setTimeout(()=>{const{mouseControl:t,autoplay:r,shadow:a,rotate:n,rotateAlongX:l,rotateAlongY:s,loading:o}=e,i=e.useEnvironmentAsSkybox?ne:ae||null;c.current&&(t?c.current.setAttribute("camera-controls",""):c.current.removeAttribute("camera-controls"),r?c.current.setAttribute("autoplay",""):c.current.removeAttribute("autoplay"),a?c.current.setAttribute("shadow-intensity","1"):c.current.removeAttribute("shadow-intensity"),a?c.current.setAttribute("shadow-softness","1"):c.current.removeAttribute("shadow-softness"),o?c.current.setAttribute("loading",o):c.current.removeAttribute("loading"),i?(c.current.setAttribute("skybox-image",i),c.current.setAttribute("skybox-height",Y.skyboxHeight||"0m")):c.current.removeAttribute("skybox-image"),$?(c.current.setAttribute("auto-rotate",""),c.current.setAttribute("auto-rotate-delay",S||3e3),c.current.setAttribute("rotation-per-second",I+"deg")):c.current.removeAttribute("auto-rotate"),n?c.current.setAttribute("camera-orbit",`${l}deg ${s}deg 105%`):c.current.removeAttribute("camera-orbit"),c.current.setAttribute("reveal",L),c.current.dataset.animation=A,c.current.setAttribute("exposure",Y?.exposure||x),B?c.current.removeAttribute("disable-zoom"):c.current.setAttribute("disable-zoom",""),c.current?.addEventListener("load",function(){c.current.setAttribute("scale",`${U} ${U} ${U}`)}),c.current?.loaded&&c.current.setAttribute("scale",`${U} ${U} ${U}`)),setTimeout(()=>{n?c.current?.setAttribute("camera-orbit",`${l}deg ${s}deg 105%`):c.current?.removeAttribute("camera-orbit")},500)},10)},[p,e]),(0,t.useEffect)(()=>{const e=async()=>{const e=new g(c.current);u(e),e.onReady(()=>{e.applyTexture(H)}),window.appliedTextures=H};return setTimeout(()=>{c?.current?.loaded?e():c?.current?.addEventListener("load",e)},20),()=>{c.current?.removeEventListener("load",e)}},[b.modelUrl,O]),(0,t.useEffect)(()=>{if(V){if((e=>{document.querySelectorAll(".variations_form .variations select")?.forEach(t=>{const r={};r[t.name]=t.value,t.addEventListener("change",function(r){e(e=>({...e,[t.name]:t.value}))}),e(r)})})(Q),le.current){const e=document.querySelector(".wl-single-slider:not(.slick-cloned)");e&&!e.querySelector(".modelViewerBlock")&&(e.append(le.current.parentElement),le.current.parentElement.style.display="none",setTimeout(()=>{},100)),(e=>{const t=document.querySelector("table.variations");if(!t)return;const r=t.querySelectorAll(".label label"),a={};r?.forEach(e=>{a[`attribute_${e.getAttribute("for")}`]=""}),e(a),t.querySelectorAll("tr")?.forEach(t=>{const r=t?.querySelector(".label label")?.getAttribute("for");t.querySelectorAll(".swatchly-swatch")?.forEach(t=>{t.addEventListener("click",()=>{a[`attribute_${r}`]=t.getAttribute("data-attr_value"),e(e=>({...e,[`attribute_${r}`]:t.getAttribute("data-attr_value")}))})})})})(Q)}setTimeout(()=>{const e=document.querySelector(".select2-selection__rendered"),t=new MutationObserver(function(t){for(const r of t)if("childList"===r.type&&r.target===e){const t=w.find(t=>t.product_variant===e.innerText)||w.find(e=>"all"===e.product_variant)||w?.[0];X(t.modelUrl)}});if(e){const r={childList:!0,subtree:!0};t.observe(e,r)}},1e3)}return()=>{}},[V]),(0,t.useEffect)(()=>{Y&&c.current&&setTimeout(()=>{const{arEnabled:e,arPlacement:t="floor",arMode:r="quick-look",modelISOSrc:a}=Y||{};e?(c.current.setAttribute("ar",""),c.current.setAttribute("ar-placement",t),c.current.setAttribute("ar-mode",r),c.current.setAttribute("ios-src",a),c.current.removeAttribute("ar-status")):(c.current.removeAttribute("ar"),c.current.removeAttribute("ar-placement"),c.current.removeAttribute("ar-mode"))},100)},[Y,c.current]);const re=Y?.poster,ae=Y.skyboxImage,ne=Y.environmentImage||j,le=(0,t.useRef)();return(0,t.useEffect)(()=>{if("object"==typeof K&&K&&Object.values(K).every(e=>null!==e&&""!==e&&void 0!==e)){const e=w.find(e=>{const t=Object.keys(K)[0];return e[t]?Object.entries(K).every(([t,r])=>[r,"all"].includes(e[t])):[K[t],"all"].includes(e.product_variant)})||w?.[1];X(e?.modelUrl)}},[K]),J?(0,t.createElement)("div",{ref:le,id:`${p}`,className:`modelViewerBlock b3dviewer align${N} ${V?"woocommerce":""} ${D&&C?"modelPagination":""}`},(0,t.createElement)("div",{id:T?.ID||"additional_id",className:`${T?.Class} b3dviewer-wrapper bp_model_parent`},(0,t.createElement)(r,{attributes:e}),J&&d&&(0,t.createElement)(t.Fragment,null,"modelViewer"===O?(0,t.createElement)("model-viewer",{loading:z||"auto","camera-controls":!0,ref:c,"data-js-focus-visible":!0,"data-decoder":C?w[0]?.decoder:b?.decoder,poster:re?.replace(/https?:/,window.location.protocol),src:J?.replace(/https?:/,window.location.protocol),exposure:Y?.exposure||x,alt:"A 3D model",scale:"1 1 1","environment-image":ne,channel:q.type,texture:q.image,"skybox-image":ae,"skybox-height":"1.5m","tone-mapping":P,"ar-placement":Y.arPlacement||"floor","ar-modes":"webxr scene-viewer quick-look","ar-scale":Y.arScale||"auto"},(0,t.createElement)("button",{type:"button",slot:"poster",id:"default-poster","aria-label":"A 3D model",style:re?{backgroundImage:` url("${re?.replace(/https?:/,window.location.protocol)}")`}:{}}),h&&!c.current?.loaded&&(0,t.createElement)("div",{className:"percentageWrapper",slot:"progress-bar"},(0,t.createElement)("div",{className:"overlay"}),(0,t.createElement)("span",{className:"percentage"},"0%")),!c.current?.loaded&&!h&&(0,t.createElement)("div",{className:"bp3d_loader",slot:"progress-bar"},(0,t.createElement)("div",{className:"overlay"}),(0,t.createElement)("img",{style:{width:"100px",background:"white",borderRadius:"5px",height:"auto"},src:y})),(0,t.createElement)("div",{className:"variantWrapper select",ref:ee},o("Variant","model-viewer")," ",(0,t.createElement)("select",{id:"variant"})),(0,t.createElement)("div",{className:"animationWrapper select",ref:te},o("Animations","model-viewer")," ",(0,t.createElement)("select",{id:"animations"})),C&&!V&&D&&(0,t.createElement)("div",{className:"slider"},(0,t.createElement)("div",{className:"slides"},w.map((e,r)=>(0,t.createElement)("button",{key:r,className:`slide ${0===r?"selected":""} ${e.poster?"":"slide-number"}`,"data-source":e?.modelUrl,"data-poster":e?.poster,onClick:()=>Z(r)},e.poster?(0,t.createElement)("img",{src:e?.poster}):(0,t.createElement)("span",null,r+1))))),C&&_&&w.length>1&&(0,t.createElement)(s,{currentItem:G,setCurrentItem:Z,models:w})):(0,t.createElement)(t.Fragment,null,(0,t.createElement)(v,{__:o,setAttributes:i,modelSrc:J,currentItem:G,setCurrentItem:Z,model:J,attributes:e}))),""===J&&w[G].poster&&(0,t.createElement)(t.Fragment,null,V&&w.length>1&&(0,t.createElement)(s,{currentItem:G,setCurrentItem:Z,models:w}),(0,t.createElement)("img",{src:w[G].poster})),(f&&"modelViewer"===O||"O3DViewer"===O&&W)&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(a,{element:le.current?.querySelector(".bp_model_parent")}),(0,t.createElement)(n,{element:le.current?.querySelector(".bp_model_parent")}))),V&&D&&(0,t.createElement)("div",{className:"modelThumbs"},w.map((e,r)=>(0,t.createElement)(t.Fragment,null,e.poster&&(0,t.createElement)("img",{className:"thumbsItem "+(r===G?"selected":""),onClick:()=>Z(r),src:e.poster}))))):(0,t.createElement)(t.Fragment,null)};Array.isArray(window.modelViewerMessages)||(window.modelViewerMessages=[]);const E=({attributes:e})=>{const[r,a]=(0,t.useState)(null),n=(0,t.useRef)();if(window.modelViewerMessages.push({attributes:e,viewerRef:n}),e)return(0,t.createElement)(x,{attributes:e,viewerRef:n,__:function(e,t=""){return e},modelReader:r,setModelReader:a})},{createRoot:C}=ReactDOM;document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-b3dviewer-modelviewer").forEach(e=>{const r=JSON.parse(e.dataset.attributes),a=e.id;C(e).render((0,t.createElement)(E,{attributes:r,id:a})),e.removeAttribute("data-attributes")})})})();