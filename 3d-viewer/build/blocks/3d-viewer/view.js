(()=>{"use strict";var e={795:e=>{e.exports=window.ReactDOM},822:(e,t,r)=>{var a=r(795);t.H=a.createRoot,a.hydrateRoot}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,r),l.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var n=a.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=a[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e+"../../"})();const a=window.React,n=({attributes:e})=>{const{styles:t,uniqueId:r,woo:n,progressBar:l,additional:s}=e,{progressBarColor:o,thumbSize:i="90px"}=t,[c,u]=(0,a.useState)(null);return(0,a.useEffect)((()=>{const e=`\n        #${r} {\n            width: ${t?.width?.desktop||t.width};\n            height: calc(${t?.height?.desktop||t.height});\n        }\n        .pop-up-content-wrap #${r} {\n            height: ${t?.height?.desktop||t.height};\n        }\n        #${r} .select {display: none}\n        \n        #${r} model-viewer {\n            background: ${t?.bgColor} ${t?.bgImage?`url(${t?.bgImage})`:" "} no-repeat center center;\n            background-size: cover;\n        }\n        #${r} model-viewer::part(default-progress-bar) {\n             display: ${l?"block":"none"}\n        }\n        #${r} .online_3d_viewer,\n        #${r} .b3dviewer-wrapper {\n            width: ${n?"100%":`${t?.width.desktop||t.width}`};\n            height: ${t?.height.desktop||t.height};\n        }\n        @media screen and (max-width: 1024px){\n            #${r} .online_3d_viewer,\n            #${r} .b3dviewer-wrapper {\n                width: ${n?"100%":`${t?.width.tablet||t.width}`};\n                height: ${t?.height.tablet||t.height};\n            }\n        }\n        @media screen and (max-width: 640px){\n            #${r} .online_3d_viewer,\n            #${r} .b3dviewer-wrapper {\n                width: ${n?"100%":`${t?.width.mobile||t.width}`};\n                height: ${t?.height.mobile||t.height};\n            }\n        }\n        #${r} model-viewer::part(default-progress-bar){\n            background: ${o};\n        }\n        #${r} .slides .slide{\n            width: ${i};\n            height: ${i};\n            padding: calc(${i} * 0.04);\n        }\n        #${r} .slide-number span{\n            font-size: calc(${i} * 0.8);\n        }\n        ${s?.CSS}\n    `.replaceAll(/\n?\s\s/g,"");u(e)}),[r,t,s,l]),(0,a.createElement)("style",null,c)},l=({element:e})=>(0,a.createElement)("svg",{onClick:()=>{e&&("function"==typeof e.requestFullscreen?e.requestFullscreen():e.classList.add("fullscreen"))},id:"openBtn",width:"24px",height:"24px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"#222",className:"bi bi-arrows-fullscreen"},(0,a.createElement)("path",{fillRule:"even",d:"M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707zm0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707zm-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707z"})),s=({element:e})=>(0,a.createElement)("svg",{id:"closeBtn",onClick:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),e?.classList.remove("fullscreen")},className:"sidebar-open",width:"34px",height:"34px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)("path",{fill:"none",stroke:"#f2f2f2",strokeWidth:"2",d:"M7,7 L17,17 M7,17 L17,7"})),o=(e,t=[],r,a=!0)=>{if(e?.parentElement){a&&(e.parentElement.style.display="inline-block"),e.innerHTML="",!t.length&&e.parentElement&&(window.location.href.includes("wp-admin")?t[0]="not available":e.parentElement.style.display="none");for(const a of t){const t=document.createElement("option");t.value=a,t.textContent=a,e.appendChild(t),a===r&&(t.selected=!0)}}},i=({currentItem:e,setCurrentItem:t,models:r})=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"slideController"},(0,a.createElement)("svg",{fill:"#000000",onClick:()=>t(e>0?e-1:e),className:"arrow-left "+(e>0?"":"disabled"),width:"24px",height:"24px",viewBox:"-78.5 0 512 512",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)("title",null,"left"),(0,a.createElement)("path",{d:"M257 64L291 98 128 262 291 426 257 460 61 262 257 64Z"})),(0,a.createElement)("svg",{onClick:()=>t(e<r.length-1?e+1:e),fill:"#000000",className:"arrow-right "+(e<r.length-1?"":"disabled"),width:"24px",height:"24px",viewBox:"-77 0 512 512",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)("title",null,"right"),(0,a.createElement)("path",{d:"M98 460L64 426 227 262 64 98 98 64 294 262 98 460Z"})))),c=r.p+"images/posx.636c229f.jpg",u=r.p+"images/posy.0722c73e.jpg",d=r.p+"images/posz.829f9244.jpg",m=r.p+"images/negx.dad27d20.jpg",p=r.p+"images/negy.ef9d1d19.jpg",h=r.p+"images/negz.a6842016.jpg",g=function(e,t="string"){if(e){if("transparent"===e)return{r:255,g:255,b:255,a:0};if(e.includes("rgba")){const t=e.match(/rgba?\((\d+),(\d+),(\d+)(?:,([\d.]+))?\)/);if(t){const[,e,r,a,n=1]=t.map(Number);return{r:e,g:r,b:a,a:n}}return null}var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e.replace("#",""));return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),a:parseInt(r[4],16)?parseInt(r[4],16):0===parseInt(r[4],16)?0:255}:null}},b=({attributes:e,currentItem:t,setCurrentItem:r,isPagination:n})=>{const{multiple:l,woo:s,models:o}=e;return(0,a.createElement)(a.Fragment,null,l&&!s&&n&&(0,a.createElement)("div",{className:"slider"},(0,a.createElement)("div",{className:"slides"},o.map(((e,n)=>(0,a.createElement)("button",{key:n,className:`slide ${n===t?"selected":""} ${e.poster?"":"slide-number"}`,"data-source":e?.modelUrl,"data-poster":e?.poster,onClick:()=>r(n)},e.poster?(0,a.createElement)("img",{src:e?.poster}):(0,a.createElement)("span",null,n+1)))))))},w=class{constructor(e){window.model=e,this.model=e,this.copy=null,this.thumbnailsById=new Map,this.thumbnail_size=256,this.textures=[],this.texturesArray=[],this.textureChannels=[],this.defaultMaterialData=null,this.initialized=!1,this.sizes=[],this.copy=null,this.readyCallbacks=[],this.isReady=!1,this.model.loaded?this.onLoad():this.model.addEventListener("load",this.onLoad.bind(this))}initialize(){this.isReady=!0,this.readyCallbacks.forEach((e=>e())),this.readyCallbacks=[]}onReady(e){this.isReady?e():this.readyCallbacks.push(e)}async onLoad(){if(this.modelUrl=this.model.src,this.getDefaultMaterialData(),this.thumbnailsById=await this.createThumbnails(),window.pagenow){const e=await this.loadModelWithoutAppending(this.model.src+"?"+Date.now());this.copy=e.model;const t=await this.createThumbnails(new Map,this.copy.materials);this.copy.thumbnailsById=t}this.initialize()}getTextureId(e){var t;return null!==(t=e.uri)&&void 0!==t?t:e.bufferView.toString()}async getTextures(){return 0===Object.keys(this.textures).length&&this.model&&await this.createThumbnails(),this.textures}async getBlobFileSize(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch the Blob URL");return(await t.blob()).size}catch(e){return console.error("Error getting Blob file size:",e),null}}async pushThumbnail(e,t){const{texture:r}=t||{};if(!r||!r.source)return null;const a=this.getTextureId(r.source);if(!e.has(a)){const t=await r.source.createThumbnail(this.thumbnail_size,this.thumbnail_size),n=await this.getBlobFileSize(t);e.set(a,{objectUrl:t,texture:r,size:n,id:a}),this.textures[a]||(this.texturesArray.push(a),this.textures[a]=t,this.sizes[a+"_"+n]=t)}return a}async createThumbnails(e,t=this.model.model?.materials){e||(e=new Map);for(const r of t||[]){await r.ensureLoaded();const{pbrMetallicRoughness:t,normalTexture:a,emissiveTexture:n,occlusionTexture:l}=r,{baseColorTexture:s,metallicRoughnessTexture:o}=t;await this.pushThumbnail(e,a),await this.pushThumbnail(e,n),await this.pushThumbnail(e,l),await this.pushThumbnail(e,s),await this.pushThumbnail(e,o)}return e}getAllMaterialData(){if(!this.model.model)return console.warn("Model not loaded yet."),{};const e={};return this.model.model.materials.forEach((async t=>{await t.ensureLoaded();const r=t.name||`Material_${Math.random().toString(36).substr(2,5)}`;e[r]={baseColor:{texture:{name:t.pbrMetallicRoughness.baseColorTexture?.texture?.source.name||null,uri:t.pbrMetallicRoughness.baseColorTexture?.texture?.source.uri||null},factor:t.pbrMetallicRoughness.baseColorFactor||[1,1,1,1]},metallicRoughness:{texture:{name:t.pbrMetallicRoughness.metallicRoughnessTexture?.texture?.source.name||null,uri:t.pbrMetallicRoughness.metallicRoughnessTexture?.texture?.source.uri||null},factor:[t.pbrMetallicRoughness.metallicFactor||1,t.pbrMetallicRoughness.roughnessFactor||1]},normal:{texture:{uri:t.normalTexture?.texture?.source.uri||null,name:t.normalTexture?.texture?.source.name||null}},emissive:{texture:{name:t.emissiveTexture?.texture?.source.name||null,uri:t.emissiveTexture?.texture?.source.uri||null},factor:t.emissiveFactor||[0,0,0]},occlusion:{texture:{name:t.occlusionTexture?.texture?.source.name||null,uri:t.occlusionTexture?.texture?.source.uri||null}}}})),e}getDefaultMaterialData(){return this.defaultMaterialData||(this.defaultMaterialData=this.getAllMaterialData()),this.defaultMaterialData}async updateMaterialTextureAndFactor(e,t,r,a=null,n=`texture_${Date.now()}`){if(this.model?.model&&e)if(r&&("baseColor"===t&&e.pbrMetallicRoughness.setBaseColorFactor(v(r)),"metallicRoughness"===t&&(e.pbrMetallicRoughness.setMetallicFactor(r[0]),e.pbrMetallicRoughness.setRoughnessFactor(r[1])),"emissive"===t&&e.setEmissiveFactor(v(r))),"default"!==a){if(!a)return t.includes("base")||t.includes("metallic")?e.pbrMetallicRoughness[t+"Texture"].setTexture(null):e[t+"Texture"].setTexture(null),void console.log(`Removed texture from '${t}' of material '${e.name}'.`);try{"string"==typeof a&&((a=await this.model.createTexture(a)).name=n),t.includes("base")||t.includes("metallic")?e.pbrMetallicRoughness[t+"Texture"].setTexture(a):e[t+"Texture"].setTexture(a),console.log(`Applied new texture ${n} to '${t}' of material '${e.name}'.`)}catch(e){console.error("Error creating texture:",e)}}else{if(t.includes("base")||t.includes("metallic")){const r=this.copy.getMaterialByName(e.name).pbrMetallicRoughness[t+"Texture"].texture;e.pbrMetallicRoughness[t+"Texture"].setTexture(r)}else{const r=this.copy.getMaterialByName(e.name)[t+"Texture"].texture;e[t+"Texture"].setTexture(r)}console.log(`Removed texture from '${t}' of material '${e.name}'.`)}else console.warn("Model or Material not found.")}async applyTexture(e,t=null,r=null){if(window.modelReader=this,e)if(t&&r){const{name:a,url:n}=e[t]?.[r]?.texture||{},l=this.model?.model?.getMaterialByName(t);let s=n||this.getTextureByName(a);e[t]?.[r]?.texture||(s="default");const o=e[t]?.[r]?.factor||null;this.updateMaterialTextureAndFactor(l,r,o,s,a)}else Object.entries(e).forEach((([e,t])=>{const r=this.model?.model?.getMaterialByName(e);r?Object.keys(t).forEach((e=>{const{name:a,url:n}=t[e]?.texture||{};let l=n||this.getTextureByName(a);t[e]?.texture||(l="default");const s=t[e]?.factor||null;this.updateMaterialTextureAndFactor(r,e,s,l,a)})):console.warn(`Material '${e}' not found.`)}))}async shakeMaterialFactor(e,t=500){if(!e)return;"string"==typeof e&&(e=this.getMaterialByName(e));const r=e.pbrMetallicRoughness.baseColorFactor.slice();e.pbrMetallicRoughness.setBaseColorFactor([1,0,0,1]),setTimeout((()=>{e.pbrMetallicRoughness.setBaseColorFactor(r)}),t)}getTextureURIByName(e){return e.includes("blob")?e:this.textures[e]||null}getMaterialByName(e){return this.model.model.getMaterialByName(e)}getTexturesArray(){return this.texturesArray}getTextureChannels(){return[{label:"Base Color",value:"baseColor"},{label:"Metallic Roughness",value:"metallicRoughness"},{label:"Normal Map",value:"normal"},{label:"Emissive",value:"emissive"},{label:"Occlusion",value:"occlusion"}]}getMaterialsNameForSelectControl(){return this.model.loaded?Array.isArray(this.model.model.materials)?this.model.model.materials.map((e=>({label:e.name.replace("_mtl","").replaceAll("_"," "),value:e.name}))):[]:(console.warn("Model not loaded yet"),[])}getFirstMaterialName(){return this.model.loaded&&this.model.model?Array.isArray(this.model.model.materials)?this.model.model.materials[0].name:null:(console.warn("Model not loaded yet"),null)}getTextureById(e){return this.thumbnailsById.get(e)}async downloadTexture(e,t=512){const{texture:r=null}=this.getTextureById(e);if(!r)return void console.error("Texture not found!");const a=await r.source.createThumbnail(t,t),n=document.createElement("canvas");n.width=t,n.height=t;const l=n.getContext("2d"),s=new Image;s.crossOrigin="anonymous",s.src=a,s.onload=()=>{l.drawImage(s,0,0,t,t);const r=document.createElement("a");r.href=n.toDataURL("image/png"),r.download=`texture_${e}.png`,r.click()},s.onerror=()=>{console.error("Failed to load texture image.")}}deepCloneModel(){const e=this.model.originalModel.clone(!0);return e.traverse((e=>{e.isMesh&&(e.material&&(e.material=e.material.clone()),e.geometry&&(e.geometry=e.geometry.clone()),e.material.map&&(e.material.map=e.material.map.clone(),e.material.map.needsUpdate=!0))})),e}async loadModelWithoutAppending(e){return new Promise(((t,r)=>{const a=document.createElement("model-viewer");a.src=e,a.setAttribute("loading","eager"),a.style.display="none",a.style.height="0",document.body.appendChild(a),a.addEventListener("load",(()=>{t(a)})),a.addEventListener("error",(e=>{r(new Error(`Model failed to load: ${e.message}`))}))}))}getTextureByName(e){if(!e)return null;try{if(this.copy?.thumbnailsById)return this.copy.thumbnailsById.get(e).texture;if(this.thumbnailsById)return this.thumbnailsById.get(e)?.texture}catch(t){console.error(t.message,e)}return null}createCopy(){}};function f(e){return(e/=255)<=.04045?e/12.92:((e+.055)/1.055)**2.4}function v(e){if(!["rgba","rgb"].includes((t=e,/^rgba\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*(0|1|0?\.\d+)\s*\)$/i.test(t)?"rgba":!!/^rgb\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*\)$/i.test(t)&&"rgb")))return e;var t;const r=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);if(!r)return null;const[a,n,l,s,o]=r.map(Number);return[f(n),f(l),f(s),o]}const y=e=>(0,a.createElement)("button",{...e}),x=e=>{const{attributes:t,currentItem:r,setCurrentItem:n,modelSrc:l,setAttributes:s,__:o}=e,{styles:w,models:f,multiple:x,O3DVSettings:E}=t,{isNavigation:C,isPagination:T,camera:M,mouseControl:A,zoom:$=!0,showEdge:S=!1,edgeColor:R}=E,[k,N]=(0,a.useState)(!1),V=(0,a.useRef)(null),I=(0,a.useRef)(null),L=(0,a.useRef)(null);return(0,a.useEffect)((()=>{if(l)if(I.current?.Destroy(),I.current?.canvas?.remove(),I.current=null,null===I.current){const e=M&&!x?{camera:new OV.Camera(new OV.Coord3D(...Object.values(M.eye)),new OV.Coord3D(...Object.values(M.center)),new OV.Coord3D(...Object.values(M.up)),45)}:{};L.current=new OV.EmbeddedViewer(V.current,{...e,backgroundColor:new OV.RGBAColor(255,255,255,255),edgeSettings:new OV.EdgeSettings(S,new OV.RGBColor(0,0,0),1),environmentSettings:new OV.EnvironmentSettings([c,u,d,m,p,h],!1)});const t=[l];L.current.LoadModelFromUrlList(t),I.current=L.current,window.VR=L.current,L.current.viewer.navigation.SetZoomStatus($)}else{I.current.LoadModelFromUrlList([l]);const e=new OV.Coord3D(0,0,0);I.current.viewer.SetCamera(new OV.Camera(new OV.Coord3D(0,0,1),e,new OV.Coord3D(0,1,0),45))}return()=>{if(null!==I.current&&null!==V.current&&k){delete I.current.model,I.current.viewer.renderer.resetState(),I.current.viewer.Clear(),I.current.viewer&&delete I.current.viewer,I.current.canvas.getContext("webgl2").getExtension("WEBGL_lose_context").loseContext();const e=I.current.canvas.cloneNode(!0);I.current.canvas.parentNode.replaceChild(e,I.current.canvas),V.current?.removeChild(V.current.children[0]),I.current.canvas?.parentNode?.removeChild(I.current.canvas),I.current.canvas.remove(),I.current=null,N(!1)}}}),[l]),(0,a.useEffect)((()=>{g(w.bgColor)&&I.current?.viewer?.SetBackgroundColor(g(w.bgColor)),setTimeout((()=>{I.current?.viewer?.Resize(V.current.offsetWidth,V.current.offsetHeight)}),10),I.current.viewer.Render(),window.viewer=I.current}),[w,l]),(0,a.useEffect)((()=>{window.addEventListener("resize",(()=>{I.current?.viewer?.Resize(V.current?.offsetWidth,V.current?.offsetHeight)}))}),[]),(0,a.useEffect)((()=>{if(L.current){L.current.viewer.navigation.SetZoomStatus($);const[e=0,t=0,r=0]=v(R)||[];L.current.viewer.SetEdgeSettings(new OV.EdgeSettings(S,new OV.RGBColor(255*e,255*t,255*r),0))}}),[$,S,R]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{ref:V,role:"img","aria-label":"Canvas showing the model in the 3D Viewer",className:`${A?"":"DMC"} ${I.current?.modelLoader?.inProgress} relative flex  flex-col items-center justify-center p-2 h-72 w-72 border-2 border-black rounded-sm online_3d_viewer`},(0,a.createElement)(b,{attributes:t,setCurrentItem:n,currentItem:r,isPagination:T}),x&&C&&f.length>1&&(0,a.createElement)(i,{currentItem:r,setCurrentItem:n,models:f}),s&&!x&&(0,a.createElement)("div",{className:"setDefaultViewContainer"},(0,a.createElement)(y,{variant:"primary",className:"setDefaultView button button-primary",onClick:()=>{if(I.current){const t=(e=I.current?.viewer?.GetCamera(),JSON.parse(JSON.stringify(e)));s({O3DVSettings:{...E,camera:t}})}var e}},o(M?"Reset Default View":"Set Default View","model-viewer")),M&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(y,{variant:"primary",className:"setDefaultView button button-primary",onClick:()=>{I.current?.viewer.SetCamera(new OV.Camera(new OV.Coord3D(...Object.values(M.eye)),new OV.Coord3D(...Object.values(M.center)),new OV.Coord3D(...Object.values(M.up)),45))}},o("See Default View","model-viewer")),(0,a.createElement)(y,{variant:"primary",className:"setDefaultView button button-primary",onClick:()=>s({O3DVSettings:{...E,camera:null}})},o("Remove Default View","model-viewer"))))))},E=({attributes:e,__:t,setAttributes:r,viewerRef:c,setModelReader:u})=>{const[d,m]=(0,a.useState)(!1),{loadingPercentage:p=!1,uniqueId:h,model:g,models:b,fullscreen:f,exposure:v,variant:y,multiple:E,additional:C,selectedAnimation:T,animation:M,autoRotate:A,rotateDelay:$,autoplay:S,rotateAlongX:R,align:k,woo:N,rotationPerSecond:V,preload:I,isPagination:L,isNavigation:D,zoom:B,currentViewer:O="modelViewer",O3DVSettings:_={},loading:F,texture:z={},environmentImage:q,zoomLevel:j=1,toneMapping:U,appliedTextures:P}=e,{isFullscreen:H}=_,[W,G]=(0,a.useState)(0),[Z,J]=(0,a.useState)(E?b[W]?.modelUrl:g?.modelUrl),X=(0,a.useMemo)((()=>E?b[W]:g),[b[W],g]),[Y,K]=(0,a.useState)(null),Q=(0,a.useRef)(),ee=(0,a.useRef)();(0,a.useEffect)((()=>{J(E?b[W]?.modelUrl:g?.modelUrl)}),[W,E,b,g]),(0,a.useEffect)((()=>{try{new URL(Z),m(!0)}catch(e){m(!1)}setTimeout((()=>{((e={})=>{const{animation:t=!1,variant:r=!1,wrapper:a}=e;if(!a)return;const n=a.querySelector("model-viewer");if(!n)return!1;if(n.src)try{const e=new URL(n.src);e?.protocol!==window.location.protocol&&(n.src=e.href.replace(e.protocol,window.location.protocol))}catch(e){console.warn(e.message,n.src)}const l=n.dataset.animation,s=a.querySelector("#variant"),i=a.querySelector("#animations"),c=a.querySelector(".percentageWrapper"),u=c?.querySelector(".percentage");c&&("interaction"===n.reveal||n.loaded)&&(c.style.display="none"),n.addEventListener("load",(()=>{o(s,n.availableVariants,"",r),o(i,n.availableAnimations,l,t),n.animationName=l,setTimeout((()=>{c&&(c.style.display="none")}),100)}));const d=setInterval((()=>{n.loaded&&clearInterval(d),c&&(c.style.display="none")}),5e3);u&&n.addEventListener("progress",(e=>{c.style.display="block",u.innerHTML=parseInt(100*e.detail.totalProgress)+"%"})),s&&s.addEventListener("input",(e=>{n.variantName=e.target.value})),i&&i.addEventListener("input",(e=>{n.animationName=e.target.value}));const m=a.querySelectorAll(".slide");for(const e of m)e.addEventListener("click",(t=>{t.preventDefault(),n.src=e?.dataset?.source,n.poster=e?.dataset?.poster,m.forEach((e=>{e.classList.remove("selected")})),e.classList.add("selected"),s&&(s.innerHTML="")}));document.querySelector(".slider")?.addEventListener("beforexrselect",(e=>{e.preventDefault()}))})({animation:M,variant:y,wrapper:c.current?.parentElement})}),10)}),[h,g,b,E,Z]),(0,a.useEffect)((()=>{S||c.current?.pause()}),[S]),(0,a.useEffect)((()=>{setTimeout((()=>{c.current&&ee.current&&(c.current.animationName=T,ee.current.querySelector("select").value=T)}),10)}),[T]),(0,a.useEffect)((()=>{Q.current&&(Q.current.style.display=y?"inline-block":"none")}),[y]),(0,a.useEffect)((()=>{ee.current&&(M&&c.current.loaded?ee.current.style.display="inline-block":ee.current.style.display="none")}),[M,ee]),(0,a.useEffect)((()=>{c.current?.turntableRotation&&c.current.resetTurntableRotation()}),[R]),(0,a.useEffect)((()=>{setTimeout((()=>{const{mouseControl:t,autoplay:r,shadow:a,rotate:n,rotateAlongX:l,rotateAlongY:s,loading:o}=e,i=e.useEnvironmentAsSkybox?ae:re||null;c.current&&(t?c.current.setAttribute("camera-controls",""):c.current.removeAttribute("camera-controls"),r?c.current.setAttribute("autoplay",""):c.current.removeAttribute("autoplay"),a?c.current.setAttribute("shadow-intensity","1"):c.current.removeAttribute("shadow-intensity"),a?c.current.setAttribute("shadow-softness","1"):c.current.removeAttribute("shadow-softness"),o?c.current.setAttribute("loading",o):c.current.removeAttribute("loading"),i?c.current.setAttribute("skybox-image",i):c.current.removeAttribute("skybox-image"),A?(c.current.setAttribute("auto-rotate",""),c.current.setAttribute("auto-rotate-delay",$||3e3),c.current.setAttribute("rotation-per-second",V+"deg")):c.current.removeAttribute("auto-rotate"),n?c.current.setAttribute("camera-orbit",`${l}deg ${s}deg 105%`):c.current.removeAttribute("camera-orbit"),c.current.setAttribute("reveal",I),c.current.dataset.animation=T,c.current.setAttribute("exposure",X?.exposure||v),B?c.current.removeAttribute("disable-zoom"):c.current.setAttribute("disable-zoom",""),c.current?.addEventListener("load",(function(){c.current.setAttribute("scale",`${j} ${j} ${j}`)})),c.current?.loaded&&c.current.setAttribute("scale",`${j} ${j} ${j}`)),setTimeout((()=>{n?c.current?.setAttribute("camera-orbit",`${l}deg ${s}deg 105%`):c.current?.removeAttribute("camera-orbit")}),500)}),10)}),[h,e]),(0,a.useEffect)((()=>{const e=async()=>{const e=new w(c.current);u(e),e.onReady((()=>{e.applyTexture(P)})),window.appliedTextures=P};return setTimeout((()=>{c?.current?.loaded?e():c?.current?.addEventListener("load",e)}),20),()=>{c.current?.removeEventListener("load",e)}}),[g.modelUrl,O]),(0,a.useEffect)((()=>{if(N){if((e=>{document.querySelectorAll(".variations_form .variations select")?.forEach((t=>{const r={};r[t.name]=t.value,t.addEventListener("change",(function(r){e((e=>({...e,[t.name]:t.value})))})),e(r)}))})(K),ne.current){const e=document.querySelector(".wl-single-slider:not(.slick-cloned)");e&&!e.querySelector(".modelViewerBlock")&&(e.append(ne.current.parentElement),ne.current.parentElement.style.display="none",setTimeout((()=>{}),100)),(e=>{const t=document.querySelector("table.variations");if(!t)return;const r=t.querySelectorAll(".label label"),a={};r?.forEach((e=>{a[`attribute_${e.getAttribute("for")}`]=""})),e(a),t.querySelectorAll("tr")?.forEach((t=>{const r=t?.querySelector(".label label")?.getAttribute("for");t.querySelectorAll(".swatchly-swatch")?.forEach((t=>{t.addEventListener("click",(()=>{a[`attribute_${r}`]=t.getAttribute("data-attr_value"),e((e=>({...e,[`attribute_${r}`]:t.getAttribute("data-attr_value")})))}))}))}))})(K)}setTimeout((()=>{const e=document.querySelector(".select2-selection__rendered"),t=new MutationObserver((function(t){for(const r of t)if("childList"===r.type&&r.target===e){const t=b.find((t=>t.product_variant===e.innerText))||b.find((e=>"all"===e.product_variant))||b?.[0];J(t.modelUrl)}}));if(e){const r={childList:!0,subtree:!0};t.observe(e,r)}}),1e3)}return()=>{}}),[N]),(0,a.useEffect)((()=>{X.arEnabled&&c.current&&setTimeout((()=>{const{arEnabled:e,arPlacement:t="floor",arMode:r="quick-look",modelISOSrc:a}=X||{};e?(c.current.setAttribute("ar",""),c.current.setAttribute("ar-placement",t),c.current.setAttribute("ar-mode",r),c.current.setAttribute("ios-src",a),c.current.removeAttribute("ar-status")):(c.current.removeAttribute("ar"),c.current.removeAttribute("ar-placement"),c.current.removeAttribute("ar-mode"))}),100)}),[X]);const te=X?.poster,re=X.skyboxImage,ae=X.environmentImage||q,ne=(0,a.useRef)();return(0,a.useEffect)((()=>{if("object"==typeof Y&&Y&&Object.values(Y).every((e=>null!==e&&""!==e&&void 0!==e))){const e=b.find((e=>{const t=Object.keys(Y)[0];return e[t]?Object.entries(Y).every((([t,r])=>[r,"all"].includes(e[t]))):[Y[t],"all"].includes(e.product_variant)}))||b?.[1];J(e?.modelUrl)}}),[Y]),Z?(0,a.createElement)("div",{ref:ne,id:`${h}`,className:`modelViewerBlock b3dviewer align${k} ${N?"woocommerce":""} ${L&&E?"modelPagination":""}`},(0,a.createElement)("div",{id:C?.ID||"additional_id",className:`${C?.Class} b3dviewer-wrapper bp_model_parent`},(0,a.createElement)(n,{attributes:e}),Z&&d&&(0,a.createElement)(a.Fragment,null,"modelViewer"===O?(0,a.createElement)("model-viewer",{loading:F||"auto","camera-controls":!0,ref:c,"data-js-focus-visible":!0,"data-decoder":E?b[0]?.decoder:g?.decoder,poster:te?.replace(/https?:/,window.location.protocol),src:Z?.replace(/https?:/,window.location.protocol),exposure:X?.exposure||v,alt:"A 3D model",scale:"1 1 1","environment-image":ae,channel:z.type,texture:z.image,"skybox-image":re,"tone-mapping":U,ar:X.arEnabled,"ar-placement":X.arPlacement||"floor","ar-modes":"webxr scene-viewer quick-look","ar-scale":X.arScale||"auto"},(0,a.createElement)("button",{type:"button",slot:"poster",id:"default-poster","aria-label":"A 3D model",style:te?{backgroundImage:` url("${te?.replace(/https?:/,window.location.protocol)}")`}:{}}),p&&!c.current?.loaded&&(0,a.createElement)("div",{className:"percentageWrapper",slot:"progress-bar"},(0,a.createElement)("div",{className:"overlay"}),(0,a.createElement)("span",{className:"percentage"},"0%")),(0,a.createElement)("div",{className:"variantWrapper select",ref:Q},t("Variant","model-viewer")," ",(0,a.createElement)("select",{id:"variant"})),(0,a.createElement)("div",{className:"animationWrapper select",ref:ee},t("Animations","model-viewer")," ",(0,a.createElement)("select",{id:"animations"})),E&&!N&&L&&(0,a.createElement)("div",{className:"slider"},(0,a.createElement)("div",{className:"slides"},b.map(((e,t)=>(0,a.createElement)("button",{key:t,className:`slide ${0===t?"selected":""} ${e.poster?"":"slide-number"}`,"data-source":e?.modelUrl,"data-poster":e?.poster,onClick:()=>G(t)},e.poster?(0,a.createElement)("img",{src:e?.poster}):(0,a.createElement)("span",null,t+1)))))),E&&D&&b.length>1&&(0,a.createElement)(i,{currentItem:W,setCurrentItem:G,models:b})):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(x,{__:t,setAttributes:r,modelSrc:Z,currentItem:W,setCurrentItem:G,model:Z,attributes:e}))),""===Z&&b[W].poster&&(0,a.createElement)(a.Fragment,null,N&&b.length>1&&(0,a.createElement)(i,{currentItem:W,setCurrentItem:G,models:b}),(0,a.createElement)("img",{src:b[W].poster})),(f&&"modelViewer"===O||"O3DViewer"===O&&H)&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(l,{element:ne.current?.querySelector(".bp_model_parent")}),(0,a.createElement)(s,{element:ne.current?.querySelector(".bp_model_parent")}))),N&&L&&(0,a.createElement)("div",{className:"modelThumbs"},b.map(((e,t)=>(0,a.createElement)(a.Fragment,null,e.poster&&(0,a.createElement)("img",{className:"thumbsItem "+(t===W?"selected":""),onClick:()=>G(t),src:e.poster})))))):(0,a.createElement)(a.Fragment,null)};Array.isArray(window.modelViewerMessages)||(window.modelViewerMessages=[]);const C=({attributes:e})=>{const[t,r]=(0,a.useState)(null),n=(0,a.useRef)();if(window.modelViewerMessages.push({attributes:e,viewerRef:n}),e)return(0,a.createElement)(E,{attributes:e,viewerRef:n,__:function(e,t=""){return e},modelReader:t,setModelReader:r})};var T=r(822);document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".wp-block-b3dviewer-modelviewer").forEach((e=>{const t=JSON.parse(e.dataset.attributes),r=e.id;(0,T.H)(e).render((0,a.createElement)(C,{attributes:t,id:r})),e.removeAttribute("data-attributes")}))}))})();
//# sourceMappingURL=view.js.map